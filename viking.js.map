{"version":3,"file":"viking.js","sources":["src/viking/support/array.js","src/viking/support/boolean.js","src/viking/support/date.js","src/viking/support/number.js","src/viking/support/object.js","src/viking/errors.js","src/viking/support/string.js","../../../../../__babelHelpers__","src/viking/sync.js","src/viking/global.js","src/viking/model/name.js","src/viking/model/type/date.js","src/viking/model/type/json.js","src/viking/model/type/number.js","src/viking/model/type/string.js","src/viking/model/type/boolean.js","src/viking/model/type.js","src/viking/model/reflection.js","src/viking/model/instance_properties/coerceAttributes.js","src/viking/model/instance_properties/constructor.js","src/viking/model/instance_properties/defaults.js","src/viking/model/instance_properties/errorsOn.js","src/viking/model/instance_properties/paramRoot.js","src/viking/model/instance_properties/save.js","src/viking/model/instance_properties/select.js","src/viking/model/instance_properties/set.js","src/viking/model/instance_properties/setErrors.js","src/viking/model/instance_properties/sync.js","src/viking/model/instance_properties/toJSON.js","src/viking/model/instance_properties/toParam.js","src/viking/model/instance_properties/touch.js","src/viking/model/instance_properties/unselect.js","src/viking/model/instance_properties/update_attribute.js","src/viking/model/instance_properties/update_attributes.js","src/viking/model/instance_properties/url.js","src/viking/model/instance_properties/urlRoot.js","src/viking/model/instance_properties.js","src/viking/model/class_properties/create.js","src/viking/model/class_properties/find.js","src/viking/model/class_properties/findOrCreateBy.js","src/viking/model/class_properties/reflectOnAssociation.js","src/viking/model/class_properties/reflectOnAssociations.js","src/viking/model/class_properties/urlRoot.js","src/viking/model/class_properties/where.js","src/viking/model/class_properties/extend.js","src/viking/model/class_properties.js","src/viking/model.js","src/viking/predicate.js","src/viking/collection.js","src/viking/view/helpers/utils.js","src/viking/view/helpers/form_tag_helpers/tag.js","src/viking/view/helpers/asset_helpers/image_tag.js","src/viking/view/helpers/form_tag_helpers/check_box_tag.js","src/viking/view/helpers/form_tag_helpers/content_tag.js","src/viking/view/helpers/form_tag_helpers/button_tag.js","src/viking/view/helpers/form_tag_helpers/text_field_tag.js","src/viking/view/helpers/form_tag_helpers/hidden_field_tag.js","src/viking/view/helpers/form_tag_helpers/form_tag.js","src/viking/view/helpers/form_tag_helpers/label_tag.js","src/viking/view/helpers/form_tag_helpers/number_field_tag.js","src/viking/view/helpers/form_tag_helpers/options_for_select_tag.js","src/viking/view/helpers/form_tag_helpers/options_from_collection_for_select_tag.js","src/viking/view/helpers/form_tag_helpers/password_field_tag.js","src/viking/view/helpers/form_tag_helpers/radio_button_tag.js","src/viking/view/helpers/form_tag_helpers/select_tag.js","src/viking/view/helpers/form_tag_helpers/submit_tag.js","src/viking/view/helpers/form_tag_helpers/text_area_tag.js","src/viking/view/helpers/form_tag_helpers/time_tag.js","src/viking/view/helpers/form_helpers/label.js","src/viking/view/helpers/builders/check_box_group_builder.js","src/viking/view/helpers/form_helpers/check_box_group.js","src/viking/view/helpers/form_helpers/check_box.js","src/viking/view/helpers/form_helpers/collection_select.js","src/viking/view/helpers/form_helpers/form_for.js","src/viking/view/helpers/form_helpers/hidden_field.js","src/viking/view/helpers/form_helpers/number_field.js","src/viking/view/helpers/form_helpers/password_field.js","src/viking/view/helpers/form_helpers/radio_button.js","src/viking/view/helpers/form_helpers/select.js","src/viking/view/helpers/form_helpers/text_area.js","src/viking/view/helpers/form_helpers/text_field.js","src/viking/view/helpers/builders/form_builder.js","src/viking/view/helpers/date_helpers/distance_of_time_in_words.js","src/viking/view/templates.js","src/viking/view/helpers/render.js","src/viking/view/helpers/url_helpers/url_for.js","src/viking/view/helpers/url_helpers/link_to.js","src/viking/view/helpers/url_helpers/mail_to.js","src/viking/view/helpers.js","src/viking/view.js","src/viking/cursor.js","src/viking/controller.js","src/viking/router.js","src/viking/paginated_collection.js","src/viking.js"],"sourcesContent":["// Calls `to_param` on all its elements and joins the result with slashes.\n// This is used by url_for in Viking Pack.\nObject.defineProperty(Array.prototype, 'toParam', {\n    value: function () { return this.map((e) => e.toParam()).join('/'); },\n    writable: true,\n    configureable: true,\n    enumerable: false\n});\n\n// Converts an array into a string suitable for use as a URL query string,\n// using the given key as the param name.\nObject.defineProperty(Array.prototype, 'toQuery', {\n    value: function (key) {\n        let prefix = key + \"[]\";\n        return this.map(function (value) {\n            if (value === null) {\n                return escape(prefix) + '=';\n            }\n            return value.toQuery(prefix);\n        }).join('&');\n    },\n    writable: true,\n    configureable: true,\n    enumerable: false\n});\n","// Alias of to_s.\nBoolean.prototype.toParam = Boolean.prototype.toString;\n\nBoolean.prototype.toQuery = function(key) {\n    return escape(key.toParam()) + \"=\" + escape(this.toParam());\n};","// strftime relies on https://github.com/samsonjs/strftime. It supports\n// standard specifiers from C as well as some other extensions from Ruby.\nDate.prototype.strftime = function(format) {\n    return strftime(format, this);\n};\n\nDate.fromISO = (s) => new Date(s);\n\n// Alias of to_s.\nDate.prototype.toParam = Date.prototype.toJSON;\n\nDate.prototype.toQuery = function(key) {\n    return escape(key.toParam()) + \"=\" + escape(this.toParam());\n};\n\nDate.prototype.today = () => new Date();\n\nDate.prototype.isToday = function() {\n    return (this.getUTCFullYear() === (new Date()).getUTCFullYear() && this.getUTCMonth() === (new Date()).getUTCMonth() && this.getUTCDate() === (new Date()).getUTCDate());\n};\n\nDate.prototype.isThisMonth = function () {\n    return (this.getUTCFullYear() === (new Date()).getUTCFullYear() && this.getUTCMonth() === (new Date()).getUTCMonth());\n}\n\nDate.prototype.isThisYear = function() {\n    return (this.getUTCFullYear() === (new Date()).getUTCFullYear());\n};\n\n\nDate.prototype.past = function () {\n    return (this < (new Date()));\n}","// ordinalize returns the ordinal string corresponding to integer:\n//\n//     (1).ordinalize()    // => '1st'\n//     (2).ordinalize()    // => '2nd'\n//     (53).ordinalize()   // => '53rd'\n//     (2009).ordinalize() // => '2009th'\n//     (-134).ordinalize() // => '-134th'\nNumber.prototype.ordinalize = function() {\n    let abs = Math.abs(this);\n    \n    if (abs % 100 >= 11 && abs % 100 <= 13) {\n        return this + 'th';\n    }\n    \n    abs = abs % 10;\n    if (abs === 1) { return this + 'st'; }\n    if (abs === 2) { return this + 'nd'; }\n    if (abs === 3) { return this + 'rd'; }\n    \n    return this + 'th';\n};\n\n// Alias of to_s.\nNumber.prototype.toParam = Number.prototype.toString;\n\nNumber.prototype.toQuery = function(key) {\n    return escape(key.toParam()) + \"=\" + escape(this.toParam());\n};\n\nNumber.prototype.second = function() {\n    return this * 1000;\n};\n\nNumber.prototype.seconds = Number.prototype.second;\n\nNumber.prototype.minute = function() {\n    return this * 60000;\n};\n\nNumber.prototype.minutes = Number.prototype.minute;\n\nNumber.prototype.hour = function() {\n    return this * 3600000;\n};\n\nNumber.prototype.hours = Number.prototype.hour;\n\nNumber.prototype.day = function() {\n    return this * 86400000;\n};\n\nNumber.prototype.days = Number.prototype.day;\n\nNumber.prototype.week = function() {\n    return this * 7 * 86400000;\n};\n\nNumber.prototype.weeks = Number.prototype.week;\n\nNumber.prototype.ago = function() {\n    return new Date((new Date()).getTime() - this);\n};\n\nNumber.prototype.fromNow = function() {\n    return new Date((new Date()).getTime() + this);\n};\n","// Returns a string representation of the receiver suitable for use as a URL\n// query string:\n// \n// {name: 'David', nationality: 'Danish'}.toParam()\n// // => \"name=David&nationality=Danish\"\n// An optional namespace can be passed to enclose the param names:\n// \n// {name: 'David', nationality: 'Danish'}.toParam('user')\n// // => \"user[name]=David&user[nationality]=Danish\"\n//\n// The string pairs \"key=value\" that conform the query string are sorted\n// lexicographically in ascending order.\nObject.defineProperty(Object.prototype, 'toParam', {\n    writable: true,\n    configureable: true,\n    enumerable: false,\n    value: function(namespace) {\n        return Object.keys(this).map((key) => {\n            let value = this[key];\n            let namespaceWithKey = (namespace ? (namespace + \"[\" + key + \"]\") : key);\n\n            if (value === null || value === undefined) {\n                return escape(namespaceWithKey);\n            } else {\n                return value.toQuery(namespaceWithKey);\n            }\n        }).join('&');\n    }\n});\n\n// Converts an object into a string suitable for use as a URL query string,\n// using the given key as the param name.\n//\n// Note: This method is defined as a default implementation for all Objects for\n// Object#toQuery to work.\nObject.defineProperty(Object.prototype, 'toQuery', {\n    writable: true,\n    configureable: true,\n    enumerable: false,\n    value: Object.prototype.toParam\n});","const NameError = function (message, file, lineNumber) {\n    let err = new Error();\n\n    if (err.stack) {\n        // Remove one stack level.\n        if (typeof(Components) != 'undefined') {\n            // Mozilla\n            this.stack = err.stack.substring(err.stack.indexOf('\\n')+1);\n        } else if (typeof(chrome) != 'undefined' || typeof(process) != 'undefined') {\n            // Chrome / Node.js\n            this.stack = err.stack.replace(/\\n[^\\n]*/,'');\n        } else {\n            this.stack = err.stack;\n        }\n    }\n\n    this.name = 'Viking.NameError';\n    this.message = message === undefined ? err.message : message;\n    this.file = file === undefined ? err.file : file;\n    this.lineNumber = lineNumber === undefined ? err.lineNumber : lineNumber;\n};\n\nNameError.prototype = Object.create(Error.prototype);\nNameError.prototype.constructor = NameError;\n\nconst ArgumentError = function (message, file, lineNumber) {\n    let err = new Error();\n\n    if (err.stack) {\n        // Remove one stack level.\n        if (typeof(Components) != 'undefined') {\n            // Mozilla\n            this.stack = err.stack.substring(err.stack.indexOf('\\n')+1);\n        } else if (typeof(chrome) != 'undefined' || typeof(process) != 'undefined') {\n            // Chrome / Node.js\n            this.stack = err.stack.replace(/\\n[^\\n]*/,'');\n        } else {\n            this.stack = err.stack;\n        }\n    }\n\n    this.name = 'Viking.ArgumentError';\n    this.message = message === undefined ? err.message : message;\n    this.file = file === undefined ? err.file : file;\n    this.lineNumber = lineNumber === undefined ? err.lineNumber : lineNumber;\n};\n\nArgumentError.prototype = Object.create(Error.prototype);\nArgumentError.prototype.constructor = ArgumentError;\n\nconst URLError = function (message, file, lineNumber) {\n    let err = new Error();\n\n    if (typeof message === 'undefined') {\n        message = 'A \"url\" property or function must be specified';\n    }\n\n    if (err.stack) {\n        // Remove one stack level.\n        if (typeof(Components) != 'undefined') {\n            // Mozilla\n            this.stack = err.stack.substring(err.stack.indexOf('\\n')+1);\n        } else if (typeof(chrome) != 'undefined' || typeof(process) != 'undefined') {\n            // Chrome / Node.js\n            this.stack = err.stack.replace(/\\n[^\\n]*/,'');\n        } else {\n            this.stack = err.stack;\n        }\n    }\n\n    this.name = 'Viking.URLError';\n    this.message = message === undefined ? err.message : message;\n    this.file = file === undefined ? err.file : file;\n    this.lineNumber = lineNumber === undefined ? err.lineNumber : lineNumber;\n}\n\nexport { NameError, ArgumentError, URLError };","import { NameError } from '../errors';\n\n// Converts the first character to uppercase\nString.prototype.capitalize = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n};\n\n// Converts the first character to lowercase\nString.prototype.anticapitalize = function() {\n    return this.charAt(0).toLowerCase() + this.slice(1);\n};\n\n// Capitalizes all the words and replaces some characters in the string to\n// create a nicer looking title. titleize is meant for creating pretty output.\nString.prototype.titleize = function() {\n    return this.underscore().humanize().replace(/\\b('?[a-z])/g, function(m){ return m.toUpperCase(); });\n};\n\n// Capitalizes the first word and turns underscores into spaces and strips a\n// trailing \"_id\", if any. Like titleize, this is meant for creating pretty output.\nString.prototype.humanize = function() {\n    let result = this.toLowerCase().replace(/_id$/, '').replace(/_/g, ' ');\n    result = result.replace(/([a-z\\d]*)/g, function(m) { return m.toLowerCase(); });\n    return result.capitalize();\n};\n\n// Makes an underscored, lowercase form from the expression in the string.\n//\n// Changes '.' to '/' to convert namespaces to paths.\n//\n// Examples:\n// \n//     \"ActiveModel\".underscore         # => \"active_model\"\n//     \"ActiveModel.Errors\".underscore # => \"active_model/errors\"\n//\n// As a rule of thumb you can think of underscore as the inverse of camelize,\n// though there are cases where that does not hold:\n//\n//     \"SSLError\".underscore().camelize() # => \"SslError\"\nString.prototype.underscore = function() {\n    let result = this.replace('.', '/');\n    result = result.replace(/([A-Z\\d]+)([A-Z][a-z])/g, \"$1_$2\");\n    result = result.replace(/([a-z\\d])([A-Z])/g, \"$1_$2\");\n    return result.replace('-', '_').toLowerCase();\n};\n\n// By default, #camelize converts strings to UpperCamelCase. If the argument\n// to camelize is set to `false` then #camelize produces lowerCamelCase.\n//\n// \\#camelize will also convert \"/\" to \".\" which is useful for converting\n// paths to namespaces.\n//\n// Examples:\n//\n//     \"active_model\".camelize               // => \"ActiveModel\"\n//     \"active_model\".camelize(true)         // => \"ActiveModel\"\n//     \"active_model\".camelize(false)        // => \"activeModel\"\n//     \"active_model/errors\".camelize        // => \"ActiveModel.Errors\"\n//     \"active_model/errors\".camelize(false) // => \"activeModel.Errors\"\n//\n// As a rule of thumb you can think of camelize as the inverse of underscore,\n// though there are cases where that does not hold:\n//\n//     \"SSLError\".underscore().camelize()   // => \"SslError\"\nString.prototype.camelize = function(uppercase_first_letter) {\n    let result;\n\n    if (uppercase_first_letter === undefined || uppercase_first_letter) {\n        result = this.capitalize();\n    } else {\n        result = this.anticapitalize();\n    }\n\n    result = result.replace(/(_|(\\/))([a-z\\d]*)/g, function(_a, _b, first, rest) {\n        return (first || '') + rest.capitalize();\n    });\n\n    return result.replace('/', '.');\n};\n\n// Convert a string to a boolean value. If the argument to #booleanize is\n// passed if the string is not 'true' or 'false' it will return the argument.\n//\n// Examples:\n//\n//     \"true\".booleanize()       // => true\n//     \"false\".booleanize()      // => false\n//     \"other\".booleanize()      // => false\n//     \"other\".booleanize(true)  // => true\nString.prototype.booleanize = function(defaultTo) {\n    if(this.toString() === 'true') { return true; }\n    if (this.toString() === 'false') { return false; }\n    \n    return (defaultTo === undefined ? false : defaultTo);\n};\n\n// Replaces underscores with dashes.\n//\n// Example:\n//\n//     \"puni_puni\"  // => \"puni-puni\"\nString.prototype.dasherize = function() {\n    return this.replace('_', '-');\n};\n\n// Replaces special characters in a string so that it may be used as part of\n// a \"pretty\" URL.\n//\n// Example:\n//\n//     \"Donald E. Knuth\".parameterize() // => 'donald-e-knuth'\nString.prototype.parameterize = function(seperator) {\n    return this.toLowerCase().replace(/[^a-z0-9\\-_]+/g, seperator || '-');\n};\n\n// Add Underscore.inflection#pluralize function on the String object\nString.prototype.pluralize = function(count, includeNumber) {\n    return _.pluralize(this, count, includeNumber);\n};\n\n// Add Underscore.inflection#singularize function on the String object\nString.prototype.singularize = function() {\n    return _.singularize(this);\n};\n\n// Tries to find a variable with the name specified in context of `context`.\n// `context` defaults to the Viking global namespace.\n//\n// Examples:\n//     'Module'.constantize     # => Module\n//     'Test.Unit'.constantize  # => Test.Unit\n//     'Unit'.constantize(Test) # => Test.Unit\n//\n// Viking.NameError is raised when the variable is unknown.\nString.prototype.constantize = function(context) {\n\n    if (!context) {\n        context = window;\n    }\n\n    return this.split('.').reduce(function (context, name, index, array) {\n        let v = context[name];\n        if (!v) {\n            throw new NameError(\"uninitialized variable \" + name); \n        }\n        return v;\n    }, context);\n\n};\n\n// Removes the module part from the expression in the string.\n//\n// Examples:\n//     'Namespaced.Module'.demodulize() # => 'Module'\n//     'Module'.demodulize() # => 'Module'\n//     ''.demodulize() # => ''\nString.prototype.demodulize = function (seperator) {\n    if (!seperator) {\n        seperator = '.';\n    }\n\n    let index = this.lastIndexOf(seperator);\n\n    if (index === -1) {\n        return String(this);\n    } else {\n        return this.slice(index + 1);\n    }\n}\n\n// If `length` is greater than the length of the string, returns a new String\n// of length `length` with the string right justified and padded with padString;\n// otherwise, returns string\nString.prototype.rjust = function(length, padString) {\n    if (!padString) { padString = ' '; }\n    \n    let padding = '';\n    let paddingLength = length - this.length;\n\n    while (padding.length < paddingLength) {\n        if (paddingLength - padding.length < padString.length) {\n            padding = padding + padString.slice(0, paddingLength - padding.length);\n        } else {\n            padding = padding + padString;\n        }\n    }\n\n    return padding + this;\n};\n\n// If `length` is greater than the length of the string, returns a new String\n// of length `length` with the string left justified and padded with padString;\n// otherwise, returns string\nString.prototype.ljust = function(length, padString) {\n    if (!padString) { padString = ' '; }\n    \n    let padding = '';\n    let paddingLength = length - this.length;\n\n    while (padding.length < paddingLength) {\n        if (paddingLength - padding.length < padString.length) {\n            padding = padding + padString.slice(0, paddingLength - padding.length);\n        } else {\n            padding = padding + padString;\n        }\n    }\n\n    return this + padding;\n};\n\n// Alias of to_s.\nString.prototype.toParam = String.prototype.toString;\n\nString.prototype.toQuery = function(key) {\n\treturn escape(key.toParam()) + \"=\" + escape(this.toParam());\n};\n\nString.prototype.downcase = String.prototype.toLowerCase;\n","var babelHelpers = {};\nexport var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n\nexport var jsx = function () {\n  var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  return function createRawReactElement(type, props, key, children) {\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {};\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  };\n}();\n\nexport var asyncToGenerator = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            return step(\"next\", value);\n          }, function (err) {\n            return step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\nexport var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexport var createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexport var defineEnumerableProperties = function (obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  return obj;\n};\n\nexport var defaults = function (obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n};\n\nexport var defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nexport var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexport var get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nexport var inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexport var _instanceof = function (left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n};\n\nexport var interopRequireDefault = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\nexport var interopRequireWildcard = function (obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n};\n\nexport var newArrowCheck = function (innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n};\n\nexport var objectDestructuringEmpty = function (obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n};\n\nexport var objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nexport var possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nexport var selfGlobal = typeof global === \"undefined\" ? self : global;\n\nexport var set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\nexport var slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexport var slicedToArrayLoose = function (arr, i) {\n  if (Array.isArray(arr)) {\n    return arr;\n  } else if (Symbol.iterator in Object(arr)) {\n    var _arr = [];\n\n    for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  } else {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n};\n\nexport var taggedTemplateLiteral = function (strings, raw) {\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n};\n\nexport var taggedTemplateLiteralLoose = function (strings, raw) {\n  strings.raw = raw;\n  return strings;\n};\n\nexport var temporalRef = function (val, name, undef) {\n  if (val === undef) {\n    throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n  } else {\n    return val;\n  }\n};\n\nexport var temporalUndefined = {};\n\nexport var toArray = function (arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n};\n\nexport var toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nbabelHelpers;\n\nexport { _typeof as typeof, _extends as extends, _instanceof as instanceof }","import { URLError } from './errors'\n// import Collection from './collection';\n\nconst noXhrPatch =\n  typeof window !== 'undefined' && !!window.ActiveXObject &&\n    !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);\n\n// Map from CRUD to HTTP for our default `Backbone.sync` implementation.\nconst methodMap = {\n  'create': 'POST',\n  'update': 'PUT',\n  'patch':  'PATCH',\n  'delete': 'DELETE',\n  'read':   'GET'\n};\n\nconst ajax = function(model, options) {\n    // if (model instanceof Collection) {\n    //     model = model.model.prototype;\n    // }\n    \n    if(model.connection) {\n        options.url = model.connection.host + options.url;\n        if (model.connection.withCredentials) {\n            options.xhrFields = { withCredentials: true };\n        }\n\n        if (options.headers) {\n            _.defaults(options.headers, model.connection.headers);\n        } else {\n            options.headers = model.connection.headers;\n        }\n    }\n\n    // We only speak json\n    if (options.headers) {\n        _.defaults(options.headers, {\n            'Accept': 'application/json'\n        });\n    } else {\n        options.headers = {'Accept': 'application/json'};\n    }\n\n    return jQuery.ajax(options);\n};\n\n// Viking.sync\n// -------------\n// Override Backbone.sync to process data for the ajax request with \n// +toParam()+ as opposed to letting jQuery automatically call $.param().\nexport const sync = function(method, model, options) {\n  let type = methodMap[method];\n\n  // Default options, unless specified.\n  _.defaults(options || (options = {}), {\n    emulateHTTP: Backbone.emulateHTTP,\n    emulateJSON: Backbone.emulateJSON\n  });\n\n  // Default JSON-request options.\n  let params = {type: type, dataType: 'json'};\n\n  // Ensure that we have a URL.\n  if (!options.url) {\n    params.url = _.result(model, 'url')\n    if (!params.url) {\n        throw new URLError();\n    }\n  }\n\n  // Ensure that we have the appropriate request data.\n  if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n    params.contentType = 'application/json';\n    params.data = JSON.stringify(options.attrs || model.toJSON(options));\n  }\n\n  // For older servers, emulate JSON by encoding the request into an HTML-form.\n  if (options.emulateJSON) {\n    params.contentType = 'application/x-www-form-urlencoded';\n    params.data = params.data ? {model: params.data} : {};\n  }\n\n  // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n  // And an `X-HTTP-Method-Override` header.\n  if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n    params.type = 'POST';\n    if (options.emulateJSON) { params.data._method = type; }\n    let beforeSend = options.beforeSend;\n    options.beforeSend = function(xhr) {\n      xhr.setRequestHeader('X-HTTP-Method-Override', type);\n      if (beforeSend) { return beforeSend.apply(this, arguments); }\n    };\n  }\n  \n  // Don't process data on a non-GET request.\n  if (params.type !== 'GET' && !options.emulateJSON) {\n    params.processData = false;\n  } else if (options.data && typeof options.data === 'object') {\n    options.data = options.data.toParam();\n  }\n\n  // Make the request, allowing the user to override any Ajax options.\n  let xhr = options.xhr = ajax(model, _.extend(params, options));\n  model.trigger('request', model, xhr, options);\n  return xhr;\n};\n\nexport default sync;","// The Viking gloval namespace for tracking created models, collections, etc...\nexport let global = {};\n\nexport default global;","import global from '../global';\n\n// TODO: the objectName should be passed into the function\nconst Name = function (name) {\n    let objectName = name.camelize(); // Namespaced.Name\n\n    this.name = objectName;\n    this.collectionName = objectName + 'Collection';\n    this.singular = objectName.underscore().replace(/\\//g, '_'); // namespaced_name\n    this.plural = this.singular.pluralize(); // namespaced_names\n    this.human = objectName.demodulize().humanize(); // Name\n    this.collection = this.singular.pluralize(); // namespaced/names\n    this.paramKey = this.singular;\n    this.routeKey = this.plural;\n    this.element = objectName.demodulize().underscore();\n\n    this.model = function () {\n        if (this._model) {\n            return this._model;\n        }\n\n        this._model = this.name.constantize(global);\n        return this._model;\n    }\n\n};\n\nexport { Name };\n\nexport default Name;\n","const DateType = {\n\n    load: function(value) {\n        if (typeof value === 'string' || typeof value === 'number') {\n            return Date.fromISO(value);\n        }\n\n        if (!(value instanceof Date)) {\n            throw new TypeError(typeof value + \" can't be coerced into Date\");\n        }\n\n        return value;\n    },\n\n    dump: function(value) {\n        return value.toISOString();\n    }\n\n};\n\nexport default DateType;\n","import global from '../../global';\nimport Model from '../../model';\n\nconst JSONType = {\n\n    load: function(value, key, className) {\n\n        if (typeof value === 'object') {\n\n            if (key) {\n                let name = key.camelize();\n\n                if (global[name]) {\n                    let model = new global[name](value);\n                    return model;\n                }\n\n                return value;\n            }\n\n            return value;\n\n            \n        }\n\n        throw new TypeError(typeof value + \" can't be coerced into JSON\");\n    },\n\n    dump: function (value) {\n        if (value instanceof Model) {\n            return value.toJSON();\n        }\n        return value;\n    }\n\n};\n\nexport default JSONType;\n","const NumberType = {\n\n    load: function(value) {\n        if (typeof value === 'string') {\n            value = value.replace(/\\,/g, '');\n\n            if (value.trim() === '') {\n                return null;\n            }\n        }\n        return Number(value);\n    },\n\n    dump: function(value) {\n        return value;\n    }\n\n};\n\nexport default NumberType;\n","const StringType = {\n\n    load: function(value) {\n        if (typeof value !== 'string' && value !== undefined && value !== null) {\n            return String(value);\n        }\n        return value;\n    },\n\n    dump: function(value) {\n        if (typeof value !== 'string' && value !== undefined && value !== null) {\n            return String(value);\n        }\n        return value;\n    }\n\n};\n\nexport default StringType;\n","const BooleanType = {\n\n    load: function (value) {\n        if (typeof value === 'string') {\n            value = (value === 'true');\n        }\n        return !!value;\n    },\n\n    dump: function(value) {\n        return value;\n    }\n\n};\n\nexport default BooleanType;\n","import DateType from './type/date';\nimport JSONType from './type/json';\nimport NumberType from './type/number';\nimport StringType from './type/string';\nimport BooleanType from './type/boolean';\n\nconst Type = {\n    'registry': {}\n};\n\nType.registry['date'] = Type.Date = DateType;\nType.registry['json'] = Type.JSON = JSONType;\nType.registry['number'] = Type.Number = NumberType;\nType.registry['string'] = Type.String = StringType;\nType.registry['boolean'] = Type.Boolean = BooleanType;\n\nexport default Type;\n","import Name from './name';\nimport global from '../global';\n\nexport const Reflection = function () { };\n\n_.extend(Reflection.prototype, {\n\n    klass: function() {\n        if (this.macro === 'hasMany') {\n            return this.collection();\n        }\n        \n        return this.model();\n    },\n    \n    model: function() {\n        return this.modelName.model();\n    },\n    \n    collection: function() {\n        return this.collectionName.constantize(global);\n    }\n\n});\n\nReflection.extend = Backbone.Model.extend;\n\nexport const BelongsTo = Reflection.extend({\n    \n    constructor: function (name, options) {\n        this.name = name;\n        this.macro = 'belongsTo';\n        this.options = _.extend({}, options);\n    \n        if (!this.options.polymorphic) {\n            if (this.options.modelName) {\n                this.modelName = new Name(this.options.modelName);\n            } else {\n                this.modelName = new Name(name);\n            }\n        }\n    }\n\n});\n\nReflection.BelongsTo = BelongsTo;\n\nexport const HasMany = Reflection.extend({\n    \n    constructor: function (name, options) {\n        this.name = name;\n        this.macro = 'hasMany';\n        this.options = _.extend({}, options);\n\n        if (this.options.modelName) {\n            this.modelName = new Name(this.options.modelName);\n        } else {\n            this.modelName = new Name(this.name.singularize());\n        }\n\n        if (this.options.collectionName) {\n            this.collectionName = this.options.collectionName;\n        } else {\n            this.collectionName = this.modelName.collectionName;\n        }\n    }\n\n});\n\nReflection.HasMany  = HasMany;\n\nexport const HasOne = Reflection.extend({\n    \n    constructor: function (name, options) {\n        this.name = name;\n        this.macro = 'hasOne';\n        this.options = _.extend({}, options);\n\n        if (!this.options.polymorphic) {\n            if (this.options.modelName) {\n                this.modelName = new Name(this.options.modelName);\n            } else {\n                this.modelName = new Name(name);\n            }\n        }\n    }\n\n});\n\nReflection.HasOne = HasOne;\n\nexport const HasAndBelongsToMany = Reflection.extend({\n\n    constructor: function (name, options) {\n        this.name = name;\n        this.macro = 'hasAndBelongsToMany';\n        this.options = _.extend({}, options);\n    \n        if (this.options.modelName) {\n            this.modelName = new Name(this.options.modelName);\n        } else {\n            this.modelName = new Name(this.name.singularize());\n        }\n\n        if (this.options.collectionName) {\n            this.collectionName = this.options.CollectionName;\n        } else {\n            this.collectionName = this.modelName.collectionName;\n        }\n\n    }\n    \n});\n\nReflection.HasAndBelongsToMany = HasAndBelongsToMany;\n\nexport default Reflection;\n","import { global } from '../../global';\nimport Model from '../../model';\nimport Type from '../type';\n\nexport const coerceAttributes = function(attrs) {\n    \n    _.each(this.associations, function(association) {\n        let objectType;\n        let polymorphic = association.options.polymorphic;\n        \n        if (!attrs[association.name]) { return; }\n        \n        if (polymorphic && (attrs[association.name] instanceof Model)) {\n            // TODO: remove setting the id?\n            attrs[association.name + '_id'] = attrs[association.name].id;\n            attrs[association.name + '_type'] = attrs[association.name].modelName.name;\n        } else if (polymorphic && attrs[association.name + '_type']) {\n            objectType = attrs[association.name + '_type'].camelize().constantize(global);\n            attrs[association.name] = new objectType(attrs[association.name]);\n        } else if (!(attrs[association.name] instanceof association.klass())) {\n            objectType = association.klass();\n            attrs[association.name] = new objectType(attrs[association.name]);\n        }\n    });\n\n    _.each(this.schema, function (options, key) {\n        if (attrs[key] || attrs[key] === false) {\n            let tmp, klass;\n            \n            klass = Type.registry[options.type];\n\n            if (klass) {\n                if (options['array']) {\n                    tmp = [];\n                    _.each(attrs[key], function(value) {\n                        tmp.push(klass.load(value, key));\n                    });\n                    attrs[key] = tmp;\n                } else {\n                    attrs[key] = klass.load(attrs[key], key);\n                }\n            } else {\n                throw new TypeError(\"Coercion of \" + options['type'] + \" unsupported\");\n            }\n        }\n    });\n\n    return attrs;\n};","import global from '../../global';\n\n// Below is the same code from the Backbone.Model function\n// except where there are comments\nexport const constructor = function (attributes, options) {\n    let attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId('c');\n    this.attributes = {};\n\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n\n    if (this.inheritanceAttribute) {\n        if (attrs[this.inheritanceAttribute] && this.constructor.modelName.name !== attrs[this.inheritanceAttribute]) {\n            // OPTIMIZE:  Mutating the [[Prototype]] of an object, no matter how\n            // this is accomplished, is strongly discouraged, because it is very\n            // slow and unavoidably slows down subsequent execution in modern\n            // JavaScript implementations\n            // Ideas: Move to Model.new(...) method of initializing models\n            let type = attrs[this.inheritanceAttribute].camelize().constantize(global);\n            this.constructor = type;\n            this.__proto__ = type.prototype;\n        }\n    }\n\n    // Add a helper reference to get the model name from an model instance.\n    this.modelName = this.constructor.modelName;\n    this.baseModel = this.constructor.baseModel;\n\n    if (this.baseModel && this.modelName && this.inheritanceAttribute) {\n        if (this.baseModel === this.constructor && this.baseModel.descendants.length > 0) {\n            attrs[this.inheritanceAttribute] = this.modelName.name;\n        } else if (_.contains(this.baseModel.descendants, this.constructor)) {\n            attrs[this.inheritanceAttribute] = this.modelName.name;\n        }\n    }\n\n    // Set up associations\n    this.associations = this.constructor.associations;\n    this.reflectOnAssociation = this.constructor.reflectOnAssociation;\n    this.reflectOnAssociations = this.constructor.reflectOnAssociations;\n\n    // Initialize any `hasMany` relationships to empty collections\n    this.reflectOnAssociations('hasMany').forEach(function(association) {\n        this.attributes[association.name] = new (association.collection())();\n    }, this);\n\n    if (options.collection) { this.collection = options.collection; }\n    if (options.parse) { attrs = this.parse(attrs, options) || {}; }\n\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.call(this, attributes, options);\n}\n","export const defaults = function () {\n    let dflts = {};\n\n    if (typeof(this.schema) === 'undefined') {\n        return dflts;\n    }\n\n    Object.keys(this.schema).forEach( (key) => {\n        if (this.schema[key]['default']) {\n            dflts[key] = this.schema[key]['default'];\n        }\n    });\n\n    return dflts;\n};\n","// TODO: testme\nexport const errorsOn = function(attribute) {\n    if (this.validationError) {\n        return this.validationError[attribute];\n    }\n\n    return false;\n};\n","// Returns string to use for params names. This is the key attributes from\n// the model will be namespaced under when saving to the server\nexport const paramRoot = function() {\n    return this.baseModel.modelName.paramKey;\n};\n","// Overwrite Backbone.Model#save so that we can catch errors when a save\n// fails.\nexport const save = function(key, val, options) {\n    let attrs, method, xhr, attributes = this.attributes;\n\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    if (key == null || typeof key === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    options = _.extend({validate: true}, options);\n\n    // If we're not waiting and attributes exist, save acts as\n    // `set(attr).save(null, opts)` with validation. Otherwise, check if\n    // the model will be valid when the attributes, if any, are set.\n    if (attrs && !options.wait) {\n      if (!this.set(attrs, options)) { return false; }\n    } else {\n      if (!this._validate(attrs, options)) { return false; }\n    }\n\n    // Set temporary attributes if `{wait: true}`.\n    if (attrs && options.wait) {\n      this.attributes = _.extend({}, attributes, attrs);\n    }\n\n    // After a successful server-side save, the client is (optionally)\n    // updated with the server-side state.\n    if (options.parse === void 0) { options.parse = true; }\n    let model = this;\n    let success = options.success;\n    options.success = function(resp) {\n      // Ensure attributes are restored during synchronous saves.\n      model.attributes = attributes;\n      let serverAttrs = model.parse(resp, options);\n      if (options.wait) { serverAttrs = _.extend(attrs || {}, serverAttrs); }\n      if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {\n        return false;\n      }\n      if (success) { success(model, resp, options); }\n      model.trigger('sync', model, resp, options);\n    };\n\n    // replacing #wrapError(this, options) with custom error handling to\n    // catch and throw invalid events\n    let error = options.error;\n    options.error = function(resp) {\n        if (resp.status === 400) {\n            let errors = JSON.parse(resp.responseText).errors;\n            if (options.invalid) {\n                options.invalid(model, errors, options);\n            }\n            model.setErrors(errors, options);\n        } else {\n            if (error) { error(model, resp, options); }\n            model.trigger('error', model, resp, options);\n        }\n    };\n\n    method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n    if (method === 'patch') { options.attrs = attrs; }\n    xhr = this.sync(method, this, options);\n\n    // Restore attributes.\n    if (attrs && options.wait) { this.attributes = attributes; }\n\n    return xhr;\n};\n","// select(options)\n// select(value[, options])\n//\n// When the model is part of a collection and you want to select a single\n// or multiple items from a collection. If a model is selected\n// `model.selected` will be set `true`, otherwise it will be `false`.\n//\n// If you pass `true` or `false` as the first paramater to `select` it will\n// select the model if true, or unselect if it is false.\n//\n// By default any other models in the collection with be unselected. To\n// prevent other models in the collection from being unselected you can\n// pass `{multiple: true}` as an option.\n//\n// The `selected` and `unselected` events are fired when appropriate.\nexport const select = function(value, options) {\n\n    // Handle both `value[, options]` and `options` -style arguments.\n    if (value === undefined || typeof value === 'object') {\n      options = value;\n      value = true;\n    }\n    \n    if (value === true) {\n        if (this.collection) {\n            this.collection.select(this, options);\n        } else {\n            this.selected = true;\n        }\n    } else {\n        if (this.selected) {\n            this.selected = false;\n            this.trigger('unselected', this);\n        }\n    }\n};\n","import { global } from '../../global';\n\nexport const set = function (key, val, options) {\n    if (key === null) { return this; }\n\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    let attrs;\n    if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n    } else {\n        (attrs = {})[key] = val;\n    }\n    \n    options || (options = {});\n\n    if (this.inheritanceAttribute && attrs[this.inheritanceAttribute] && this.constructor.modelName.name !== attrs.type) {\n        // OPTIMIZE:  Mutating the [[Prototype]] of an object, no matter how\n        // this is accomplished, is strongly discouraged, because it is very\n        // slow and unavoidably slows down subsequent execution in modern\n        // JavaScript implementations\n        // Ideas: Move to Model.new(...) method of initializing models\n        let type = attrs[this.inheritanceAttribute].camelize().constantize(global);\n        this.constructor = type;\n        this.__proto__ = type.prototype;\n\t\tthis.modelName = type.modelName;\n        \n        // TODO: move to function, used in Model.new\n        // TODO: probably move to a becomes method\n        // Set up associations\n        this.associations = this.constructor.associations;\n        this.reflectOnAssociation = this.constructor.reflectOnAssociation;\n        this.reflectOnAssociations = this.constructor.reflectOnAssociations;\n\n        // Initialize any `hasMany` relationships to empty collections\n        _.each(this.reflectOnAssociations('hasMany'), function(association) {\n            if (!this.attributes[association.name]) {\n                this.attributes[association.name] = new (association.collection())();\n            }\n        }, this);\n    }\n\n    this.coerceAttributes(attrs);\n    _.each(attrs, function(value, key) {\n        let association = this.reflectOnAssociation(key);\n        if (association && association.macro === 'hasMany') {\n            if (!value) {\n                this.attributes[key].set([]);\n            } else {\n                this.attributes[key].set(value.models);\n                _.each(value.models, function(model) {\n                    model.collection = this.attributes[key];\n                }, this);\n            }\n\n            delete attrs[key];\n        } else if (association && association.macro == 'belongsTo') {\n            if (!value) {\n                options.unset ? delete this.attributes[key + '_id'] : this.attributes[key + '_id'] = value;\n            } else {\n                this.attributes[key + '_id'] = value.id;\n            }\n        }\n    }, this);\n    \n    return Backbone.Model.prototype.set.call(this, attrs, options);\n};\n","export const setErrors = function(errors, options) {\n    if(_.size(errors) === 0) { return; }\n\n    let model = this;\n    this.validationError = errors;\n\n    model.trigger('invalid', this, errors, options);\n};\n","import { sync as vikingSync } from './../../sync';\n\n// Override [Backbone.Model#sync](http://backbonejs.org/#Model-sync).\n// [Ruby on Rails](http://rubyonrails.org/) expects the attributes to be\n// namespaced\nexport const sync = function(method, model, options) {\n    options || (options = {});\n\n    if (options.data == null && (method === 'create' || method === 'update' || method === 'patch')) {\n        options.contentType = 'application/json';\n        options.data = {};\n        options.data[_.result(model, 'paramRoot')] = (options.attrs || model.toJSON(options));\n        options.data = JSON.stringify(options.data);\n    }\n\n    return vikingSync.call(this, method, model, options);\n};\n","import Type from '../type';\n\n// similar to Rails as_json method\nexport const toJSON = function (options) {\n    let data = _.clone(this.attributes);\n    \n    if (options === undefined) { options = {}; }\n\n    if (options.include) {\n        if (typeof options.include === 'string') {\n            let key = options.include;\n            options.include = {};\n            options.include[key] = {};\n        } else if (_.isArray(options.include)) {\n            let array = options.include;\n            options.include = {};\n            _.each(array, function(key) {\n                options.include[key] = {};\n            });\n        }\n    } else {\n        options.include = {};\n    }\n\n    _.each(this.associations, function(association) {\n        if (!options.include[association.name]) {\n            delete data[association.name];\n            if (association.macro === 'belongsTo' && data[association.name + '_id'] === undefined) {\n                delete data[association.name + '_id'];\n            }\n        } else if (association.macro === 'belongsTo' || association.macro === 'hasOne') {\n            if (data[association.name]) {\n                data[association.name + '_attributes'] = data[association.name].toJSON(options.include[association.name]);\n                delete data[association.name];\n                delete data[association.name + '_id'];\n            } else if (data[association.name] === null) {\n                data[association.name + '_attributes'] = null;\n                delete data[association.name];\n                delete data[association.name + '_id'];\n            }\n        } else if (association.macro === 'hasMany') {\n            if (data[association.name]) {\n                data[association.name + '_attributes'] = data[association.name].toJSON(options.include[association.name]);\n                delete data[association.name];\n            }\n        }\n    });\n\n    _.each(this.schema, function (options, key) {\n        if (data[key] || data[key] === false) {\n            let tmp, klass;\n            \n            klass = Type.registry[options.type];\n\n            if (klass) {\n                if (options.array) {\n                    tmp = [];\n                    _.each(data[key], function(value) {\n                        tmp.push(klass.dump(value, key));\n                    });\n                    data[key] = tmp;\n                } else {\n                    data[key] = klass.dump(data[key], key);\n                }\n            } else {\n                throw new TypeError(\"Coercion of \" + options.type + \" unsupported\");\n            }\n        }\n    });\n\n    return data;\n};\n","// Returns a string representing the object's key suitable for use in URLs,\n// or nil if `#isNew` is true.\nexport const toParam = function() {\n    return this.isNew() ? null : this.get('id');\n};\n","// Saves the record with the updated_at and any attributes passed in to the\n// current time.\n//\n// The JSON response is expected to return an JSON object with the attribute\n// name and the new time. Any other attributes returned in the JSON will be\n// updated on the Model as well\n//\n// TODO:\n// Note that `#touch` must be used on a persisted object, or else an\n// Viking.Model.RecordError will be thrown.\nexport const touch = function(columns, options) {\n    let now = new Date();\n    \n    let attrs = {\n        updated_at: now\n    }\n\n    options = _.extend({patch: true}, options);\n    \n    if (_.isArray(columns)) {\n        _.each(columns, function (column) {\n            attrs[column] = now;\n        });\n    } else if (columns) {\n        attrs[columns] = now;\n    }\n    \n    return this.save(attrs, options);\n};\n","// Opposite of #select. Triggers the `unselected` event.\nexport const unselect = function(options) {\n    this.select(false, options);\n};\n","// TODO: test return\nexport const updateAttribute = function (key, value, options) {\n    let data = {};\n    data[key] = value;\n    \n    return this.updateAttributes(data, options);\n};\n","// TODO: test return\nexport const updateAttributes = function (data, options) {\n    options || (options = {});\n    options.patch = true;\n    \n    return this.save(data, options);\n};\n","import { URLError } from '../../errors';\n\n// Default URL for the model's representation on the server\nexport const url = function() {\n    let base = _.result(this, 'urlRoot') || _.result(this.collection, 'url');\n\n    if (!base) {\n        throw new URLError();\n    }\n\n    if (this.isNew()) return base;\n        \n    return base.replace(/([^\\/])$/, '$1/') + this.toParam();\n};\n","// Alias for `::urlRoot`\nexport const urlRoot = function() {\n    return this.constructor.urlRoot();\n};\n","export { coerceAttributes } from './instance_properties/coerceAttributes';\nexport { constructor } from './instance_properties/constructor';\nexport { defaults } from './instance_properties/defaults';\nexport { errorsOn } from './instance_properties/errorsOn';\nexport { paramRoot } from './instance_properties/paramRoot';\nexport { save } from './instance_properties/save';\nexport { select } from './instance_properties/select';\nexport { set } from './instance_properties/set';\nexport { setErrors } from './instance_properties/setErrors';\nexport { sync } from './instance_properties/sync';\nexport { toJSON } from './instance_properties/toJSON';\nexport { toParam } from './instance_properties/toParam';\nexport { touch } from './instance_properties/touch';\nexport { unselect } from './instance_properties/unselect';\nexport { updateAttribute } from './instance_properties/update_attribute';\nexport { updateAttributes } from './instance_properties/update_attributes';\nexport { url } from './instance_properties/url';\nexport { urlRoot } from './instance_properties/urlRoot';\n\nexport let abstract = true;\n\n// inheritanceAttribute is the attirbute used for STI\nexport let inheritanceAttribute = 'type';\n","// Create a model with +attributes+. Options are the \n// same as Viking.Model#save\nexport const create = function(attributes, options) {\n    let model = new this(attributes);\n    model.save(null, options);\n    return model;\n};\n","// Find model by id. Accepts success and error callbacks in the options\n// hash, which are both passed (model, response, options) as arguments.\n//\n// Find returns the model, however it most likely won't have fetched the\n// data\tfrom the server if you immediately try to use attributes of the\n// model.\nexport const find = function(id, options) {\n    let model = new this({id: id});\n    model.fetch(options);\n    return model;\n};\n","// Find or create model by attributes. Accepts success callbacks in the\n// options hash, which is passed (model) as arguments.\n//\n// findOrCreateBy returns the model, however it most likely won't have fetched\n// the data\tfrom the server if you immediately try to use attributes of the\n// model.\nexport const findOrCreateBy = function(attributes, options) {\n    let klass = this;\n    klass.where(attributes).fetch({\n        success: function (modelCollection) {\n            let model = modelCollection.models[0];\n            if (model) {\n                if (options && options.success) options.success(model);\n            } else {\n                klass.create(attributes, options);\n            }\n        }\n    });\n}\n","export const reflectOnAssociation = function(name) {\n    return this.associations[name];\n};\n","export const reflectOnAssociations = function(macro) {\n    let associations = _.values(this.associations);\n    if (macro) {\n        associations = _.select(associations, function(a) {\n            return a.macro === macro;\n        });\n    }\n\n    return associations;\n};\n","// Generates the `urlRoot` based off of the model name.\nexport const urlRoot = function() {\n    if (this.prototype.hasOwnProperty('urlRoot')) {\n        return _.result(this.prototype, 'urlRoot')\n    } else if (this.baseModel.prototype.hasOwnProperty('urlRoot')) {\n        return _.result(this.baseModel.prototype, 'urlRoot')\n    } else {\n        return \"/\" + this.baseModel.modelName.plural;\n    }\n};\n","import { global } from '../../global';\n\n// Returns a unfetched collection with the predicate set to the query\nexport const where = function(options) {\n    // TODO: Move to modelName as well?\n    let Collection = (this.modelName.name + 'Collection').constantize(global);\n    \n    return new Collection(undefined, {predicate: options});\n};\n","import Name from '../name';\nimport { global } from '../../global';\nimport { Reflection } from '../reflection';\nimport { ArgumentError } from '../../errors';\n\n// Overide the default extend method to support passing in the modelName\n// and support STI\n//\n// The modelName is used for generating urls and relationships.\n//\n// If a Model is extended further is acts simlar to ActiveRecords STI.\n//\n// `name` is optional, and must be a string\nexport const extend = function(name, protoProps, staticProps) {\n    // if (typeof name !== 'string' || arguments.length < 1 || arguments.length > 3) {\n    //     throw new ArgumentError('extend takes 1 - 3 arguments (name: String, protoProps: Object, staticProps: Object?)');\n    // }\n    if(typeof name !== 'string') {\n        staticProps = protoProps;\n        protoProps = name;\n    }\n    protoProps || (protoProps = {});\n\n    let child = Backbone.Model.extend.call(this, protoProps, staticProps);\n\n    if (typeof name === 'string') {\n        child.modelName = new Name(name);\n    }\n\n    child.associations = {};\n    child.descendants = [];\n    child.inheritanceAttribute = (protoProps.inheritanceAttribute === undefined) ? this.prototype.inheritanceAttribute : protoProps.inheritanceAttribute;\n\n    if (child.inheritanceAttribute === false || (this.prototype.hasOwnProperty('abstract') && this.prototype.abstract)) {\n        child.baseModel = child;\n    } else {\n        child.baseModel.descendants.push(child);\n    }\n\n    ['belongsTo', 'hasOne', 'hasMany', 'hasAndBelongsToMany'].forEach(function(macro) {\n        (protoProps[macro] || []).concat(this[macro] || []).forEach(function(name) {\n            let options;\n\n            // Handle both `type, key, options` and `type, [key, options]` style arguments\n            if (Array.isArray(name)) {\n                options = name[1];\n                name = name[0];\n            }\n\n            if (!child.associations[name]) {\n                let reflectionClass = {\n                    'belongsTo': Reflection.BelongsTo,\n                    'hasOne': Reflection.HasOne,\n                    'hasMany': Reflection.HasMany,\n                    'hasAndBelongsToMany': Reflection.HasAndBelongsToMany\n                }\n                reflectionClass = reflectionClass[macro];\n\n                child.associations[name] = new reflectionClass(name, options);\n            }\n        });\n    }, this.prototype);\n\n    if (this.prototype.schema && protoProps.schema) {\n        Object.keys(this.prototype.schema).forEach( (key) => {\n            if(!child.prototype.schema[key]) {\n                child.prototype.schema[key] = this.prototype.schema[key];\n            }\n        });\n    }\n\n    // Track the model in the Viking global namespace.\n    // Used in the constinize method\n    if (child.modelName) {\n        global[child.modelName.name] = child;\n    }\n\n    return child;\n};\n","export { create } from './class_properties/create';\nexport { find } from './class_properties/find';\nexport { findOrCreateBy } from './class_properties/findOrCreateBy';\nexport { reflectOnAssociation } from './class_properties/reflectOnAssociation';\nexport { reflectOnAssociations } from './class_properties/reflectOnAssociations';\nexport { urlRoot } from './class_properties/urlRoot';\nexport { where } from './class_properties/where';\nexport { extend } from './class_properties/extend';\n\nexport const associations = [];","import Name from './model/name';\nimport Type from './model/type';\nimport Reflection from './model/reflection';\n\nimport * as instanceProperties from './model/instance_properties';\nimport * as classProperties from './model/class_properties';\n\n\n//= require_tree ./model/instance_properties\n\n\n// Viking.Model\n// ------------\n//\n// Viking.Model is an extension of [Backbone.Model](http://backbonejs.org/#Model).\n// It adds naming, relationships, data type coercions, selection, and modifies\n// sync to work with [Ruby on Rails](http://rubyonrails.org/) out of the box.\nconst Model = Backbone.Model.extend(instanceProperties, classProperties);\n\nModel.Name = Name;\nModel.Type = Type;\nModel.Reflection = Reflection;\n\nexport default Model;\n","const Predicate = Backbone.Model;\n\nexport default Predicate;","import sync from './sync';\n// import Name from './name';\nimport Model from './model';\nimport { global } from './global';\nimport Predicate from './predicate';\n\n// Viking.Collection\n// -----------------\n//\n// Viking.Collection is an extension of [Backbone.Collection](http://backbonejs.org/#Collection).\n// It adds predicates, selection, and modifies fetch to cancel any current\n// request if a new fetch is triggered.\nexport const Collection = Backbone.Collection.extend({\n    \n    // Set the default model to a generic Viking.Model\n    model: Model,\n\n    constructor: function(models, options) {\n        Backbone.Collection.call(this, models, options);\n\n        if(options && options.predicate) {\n            this.setPredicate(options.predicate, {silent: true});\n        }\n\n        if(options && options.order) {\n            this.order(options.order, {silent: true});\n        }\n    },\n    \n    url: function() {\n        return \"/\" + this.model.modelName.plural;\n    },\n\n    paramRoot: function() {\n        return this.model.modelName.plural;\n    },\n    \n    // If a predicate is set it's paramaters will be passed under the\n    // `where` key when querying the server. #predicateChanged is\n    // set as a callback on the `change` event for the predicate\n    //\n    // #setPredicate accepts either attributes to instaniate a\n    // Viking.Predicate or an instanceof a Viking.Predicate\n    //\n    // To remove a predeicate call `#setPredicate` with a falsey value.\n    //\n    // Calling #setPredicate and setting it the same object that is currently\n    // the predicate will not trigger a #predicateChanged call\n    setPredicate: function(predicate, options) {\n        if (this.predicate === predicate) { return false; }\n        \n        if(this.predicate) { this.stopListening(this.predicate); }\n        \n        if(predicate) {\n            if(!(predicate instanceof Predicate)) {\n                predicate = new Predicate(predicate);\n            }\n            this.predicate = predicate;\n            this.listenTo(predicate, 'change', this.predicateChanged);\n            if(!(options && options.silent)) { this.predicateChanged(); }\n        } else if (this.predicate) {\n            delete this.predicate;\n            if(!(options && options.silent)) { this.predicateChanged(); }\n        }\n    },\n    \n    // Called when the predicate is changed. Having this being called\n    // when the predicate changes instead of just `fetch` allows sub\n    // collections to overwrite what happens when it changes. An example\n    // of this would be the `Viking.PaginatedCollection`\n    predicateChanged: function(predicate, options) {\n        this.trigger('change:predicate', this.predicate);\n        this.fetch();\n    },\n\n    // Sets `'selected'` to `true` on the `model`. By default all other models\n    // will be unselected. If `{multiple: true}` is passed as an option the other\n    // models will not be unselected. Triggers the `selected` event on the\n    // collection. If the model is already selected the `selected` event is\n    // not triggered\n    select: function(model, options) {\n        options || (options = {});\n        \n        if(!options.multiple) {\n            this.clearSelected(model);\n        }\n        if(!model.selected) {\n            model.selected = true;\n            model.trigger('selected', this.selected());\n        }\n    },\n    \n    // returns all the models where `selected` == true\n    selected: function() {\n        return this.filter(function(m) { return m.selected; });\n    },\n    \n    // Sets `'selected'` to `false` on all models\n    clearSelected: function(exceptModel) {\n        if(exceptModel instanceof Backbone.Model) {\n            exceptModel = exceptModel.cid;\n        }\n        this.each(function(m) {\n            if(m.cid !== exceptModel) {\n                m.unselect();\n            }\n        });\n    },\n    \n    // Override the default Backbone.Collection#fetch to cancel any current\n    // fetch request if fetch is called again. For example when the predicate\n    // changes 3 times, if the first 2 request don't return before the 3rd is\n    // sent they will be canceled and only the last one will finish and update\n    // the collection. You won't get the collection being updated 3 times.\n    fetch: function(options) {\n        options || (options = {});\n        \n        let complete = options.complete;\n        options.complete = _.bind(function() {\n            delete this.xhr;\n            if(complete) { complete(); }\n        }, this);\n        \n        if (this.xhr) { this.xhr.abort(); }\n        this.xhr = Backbone.Collection.prototype.fetch.call(this, options);\n    },\n    \n    // TODO: testme?\n    sync: function(method, model, options) {\n        if(method === 'read' && this.predicate) {\n            options.data || (options.data = {});\n            options.data.where = this.predicate.attributes;\n        }\n        \n        if(method === 'read' && this.ordering) {\n            options.data || (options.data = {});\n            options.data.order = this.ordering;\n        }\n        \n        return sync.apply(this, arguments);\n    },\n\n    // If a order is set it's paramaters will be passed under the\n    // `order` key when querying the server. #orderChanged is\n    // set as a callback when the ordering is changed.\n    //\n    // `#order` accepts key(s) or object(s) specifiying the keys and direction of\n    // ordering\n    //\n    // To remove the ordering call `#order` with a falsey value.\n    //\n    // If the last arguments has the `silent` key it it. It will be considered\n    // as options\n    //\n    // Examples\n    // --------\n    //\n    // order('size')                            => [{'size': 'asc'}]\n    // order(['size', 'id'])                      => [{'size': 'asc'}, {'id': 'asc'}]\n    // order('listings.size')                   => [{'listings.size': 'asc'}]\n    // order(['listings.size', 'properties.id'])  => [{'listings.size': 'asc'}, {'properties.id': 'asc'}]\n    // order({size: 'asc'})                     => [{'size': 'asc'}]\n    // order([{size: 'desc'}])                    => [{'size': 'desc'}]\n    // order({'listings.size': 'desc'})         => [{'listings.size': 'desc'}]\n    // order([{size: 'asc'}, {size: 'desc'}])     => [{'size': 'asc'}, {'id': 'desc'}]\n    // order({size: 'asc'}, {silent: true})     => [{'size': 'asc'}]\n    order: function(order, options) {\n        options || (options = {});\n        order = (_.isArray(order) ? order : [order]);\n        \n        order = _.map(order, function(o) {\n            let normalizedOrder;\n            \n            if(typeof o === 'string') {\n                normalizedOrder = {};\n                normalizedOrder[o] = 'asc';\n            } else {\n                normalizedOrder = o;\n            }\n            \n            return normalizedOrder;\n        });\n        \n        if (order.length === 1 && !order[0]) {\n            this.ordering = undefined;\n            if (!options.silent) { this.orderChanged(order); }\n            return;\n        }\n        \n        if (this.ordering) {\n            let orderingEqual = _.find( _.map(this.ordering, function(el, i) { return _.isEqual(el, order[i]); }), function (el) { return el; } );\n            if (!orderingEqual) {\n                this.ordering = order;\n                if (!options.silent) { this.orderChanged(order); }\n            }\n            return;\n        }\n        \n        this.ordering = order;\n        if (!options.silent) { this.orderChanged(order); }\n    },\n    \n    // Called when the order is changed. Having this being called\n    // when the predicate changes instead of just `fetch` allows sub\n    // collections to overwrite what happens when it changes, similar to\n    // #predicateChanged\n    orderChanged: function(order) {\n        this.fetch();\n    }\n    \n}, {\n\n    extend: function(name, protoProps, staticProps) {\n\n        if(typeof name !== 'string') {\n            staticProps = protoProps;\n            protoProps = name;\n        }\n        protoProps || (protoProps = {});\n\n        let child = Backbone.Collection.extend.call(this, protoProps, staticProps);\n\n        // Track the collection in the Viking global namespace.\n        // Used in the constinize method\n        if (typeof name !== 'string') {\n            if (child.prototype.model && child.prototype.model.modelName) {\n                name = child.prototype.model.modelName.collectionName;\n                global[name] = child;\n            }\n        } else {\n            global[name] = child;\n        }\n\n        return child;\n    }\n\n});\n\nexport default Collection;","import Collection from '../../collection';\n\nlet booleanAttributes = ['disabled', 'readonly', 'multiple', 'checked',\n    'autobuffer', 'autoplay', 'controls', 'loop', 'selected', 'hidden',\n    'scoped', 'async', 'defer', 'reversed', 'ismap', 'seemless', 'muted',\n    'required', 'autofocus', 'novalidate', 'formnovalidate', 'open',\n    'pubdate', 'itemscope'];\n\nexport const tagOption = function (key, value, escape) {\n    if (Array.isArray(value)) {\n        value = value.join(\" \");\n    }\n\n    if (escape) {\n        value = _.escape(value);\n    }\n\n    return key + '=\"' + value + '\"';\n};\n\nexport const dataTagOption = function (key, value, escape) {\n    key = \"data-\" + key;\n\n    if (_.isObject(value)) {\n        value = JSON.stringify(value);\n    }\n\n    return tagOption(key, value, escape);\n};\n\nexport const tagOptions = function (options, escape) {\n    if (options === undefined) {\n        return \"\";\n    }\n\n    if (escape === undefined) {\n        escape = true;\n    }\n\n    let attrs = [];\n    _.each(options, function(value, key) {\n        if (key === \"data\" && _.isObject(value)) {\n            // TODO testme\n            _.each(value, function(value, key) {\n                attrs.push(dataTagOption(key, value, escape));\n            });\n        } else if (value === true && _.contains(booleanAttributes, key)) {\n            attrs.push(key);\n        } else if (value !== null && value !== undefined) {\n            attrs.push(tagOption(key, value, escape));\n        }\n    });\n\n    if (attrs.length === 0) {\n        return '';\n    }\n\n    return \" \" + attrs.sort().join(' ');\n};\n    \n// see http://www.w3.org/TR/html4/types.html#type-name\nexport const sanitizeToId = function (name) {\n    return name.replace(/[^\\-a-zA-Z0-9:.]/g, \"_\").replace(/_+/g, '_').replace(/_+$/, '').replace(/_+/g, '_');\n};\n\n// TODO: move to model_helpers?\nexport const tagNameForModelAttribute = function (model, attribute, options) {\n    options || (options = {});\n        \n    let value = model.get(attribute);\n    let name;\n\n    if (options.namespace) {\n        name = options.namespace + '[' + attribute + ']';\n    } else {\n        name = model.baseModel.modelName.paramKey + '[' + attribute + ']';\n    }\n        \n    if (value instanceof Collection || Array.isArray(value)) {\n        name = name + '[]';\n    }\n     \n    return name;\n};\n\n// TODO: move to model_helpers?\nexport const addErrorClassToOptions = function(model, attribute, options) {\n    if (model.errorsOn(attribute)) {\n        if (options['class']) {\n            options['class'] = options['class'] + ' error';\n        } else {\n            options['class'] = 'error';\n        }\n    }\n};\n\n// TODO: move to model_helpers?\n// TODO: testme\nexport const methodOrAttribute = function (model, funcOrAttribute) {\n    if (typeof funcOrAttribute !== 'function') {\n        if (model[funcOrAttribute]) {\n            return _.result(model, funcOrAttribute);\n        }\n            \n        return model.get(funcOrAttribute);\n    }\n\n    return funcOrAttribute(model);\n};\n","// TODO: This should not be in form tag helpers\n\nimport { tagOptions } from './../utils';\n\n// tag(name, [options = {}, escape = true])\n// ========================================\n//\n// Returns an empty HTML tag of type `name` add HTML attributes by passing\n// an attributes hash to `options`. Set escape to `false` to disable attribute\n// value escaping.\n//\n// Arguments\n// ---------\n// - Use `true` with boolean attributes that can render with no value, like `disabled` and `readonly`.\n// - HTML5 data-* attributes can be set with a single data key pointing to a hash of sub-attributes.\n// - Values are encoded to JSON, with the exception of strings and symbols.\n//\n// Examples\n// --------\n//\n//   tag(\"br\")\n//   // => <br>\n//\n//   tag(\"input\", {type: 'text', disabled: true})\n//   // => <input type=\"text\" disabled=\"disabled\" />\n//\n//   tag(\"img\", {src: \"open & shut.png\"})\n//   // => <img src=\"open &amp; shut.png\" />\n//   \n//   tag(\"img\", {src: \"open &amp; shut.png\"}, false, false)\n//   // => <img src=\"open &amp; shut.png\" />\n//   \n//   tag(\"div\", {data: {name: 'Stephen', city_state: [\"Chicago\", \"IL\"]}})\n//   // => <div data-name=\"Stephen\" data-city_state=\"[&quot;Chicago&quot;,&quot;IL&quot;]\" />\nexport const tag = function (name, options, escape) {\n    return \"<\" + name + tagOptions(options, escape) + \">\";\n};\n\nexport default tag;","import { tag } from '../form_tag_helpers/tag';\n\n// Returns an HTML image tag for the +source+. The +source+ can be a full\n// path or a file.\n//\n// ==== Options\n//\n// You can add HTML attributes using the +options+. The +options+ supports\n// two additional keys for convenience and conformance:\n//\n// * <tt>:alt</tt>  - If no alt text is given, the file name part of the\n//   +source+ is used (capitalized and without the extension)\n// * <tt>:size</tt> - Supplied as \"{Width}x{Height}\" or \"{Number}\", so \"30x45\" becomes\n//   width=\"30\" and height=\"45\", and \"50\" becomes width=\"50\" and height=\"50\".\n//   <tt>:size</tt> will be ignored if the value is not in the correct format.\n//\n// ==== Examples\n//\n//   imageTag(\"/assets/icon.png\")\n//   // => <img alt=\"Icon\" src=\"/assets/icon.png\">\n//   imageTag(\"/assets/icon.png\", {size: \"16x10\", alt: \"A caption\"})\n//   // => <img src=\"/assets/icon.png\" width=\"16\" height=\"10\" alt=\"A caption\">\n//   imageTag(\"/icons/icon.gif\", size: \"16\")\n//   // => <img src=\"/icons/icon.gif\" width=\"16\" height=\"16\" alt=\"Icon\">\n//   imageTag(\"/icons/icon.gif\", height: '32', width: '32')\n//   // => <img alt=\"Icon\" height=\"32\" src=\"/icons/icon.gif\" width=\"32\">\n//   imageTag(\"/icons/icon.gif\", class: \"menu_icon\")\n//   // => <img alt=\"Icon\" class=\"menu_icon\" src=\"/icons/icon.gif\">\n\nexport const imageTag = function(source, options) {\n    let separator = /x/i,\n        size,\n        alt;\n\n    if (!options) {\n        options = {};\n    }\n\n    if (source) {\n        options.src = source;\n    }\n\n    if (options.size) {\n        size = options.size.search(separator) > 0 ? options.size.split(separator) : [options.size, options.size];\n        options.width = size[0];\n        options.height = size[1];\n        delete options.size;\n    }\n\n    if (!options.alt) {\n        alt = options.src.replace(/^.*[\\\\\\/]/, '').split(/\\./)[0];\n        alt = alt.charAt(0).toUpperCase() + alt.slice(1);\n        options.alt = alt;\n    }\n\n    return tag('img', options);\n};\n\nexport default imageTag;","import { sanitizeToId } from './../utils';\nimport tag from './tag';\n\n// checkBoxTag(name, value=\"1\", checked=false, options)\n// ======================================================\n//\n// Creates a check box form input tag.\n//\n// Options\n// -------\n//      - disabled: If true, the user will not be able to use this input.\n//      - Any other key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//   checkBoxTag('accept')\n//   // => <input name=\"accept\" type=\"checkbox\" value=\"1\" />\n//   \n//   checkBoxTag('rock', 'rock music')\n//   // => <input name=\"rock\" type=\"checkbox\" value=\"rock music\" />\n//   \n//   checkBoxTag('receive_email', 'yes', true)\n//   // => <input checked=\"checked\" name=\"receive_email\" type=\"checkbox\" value=\"yes\" />\n//   \n//   checkBoxTag('tos', 'yes', false, class: 'accept_tos')\n//   // => <input class=\"accept_tos\" name=\"tos\" type=\"checkbox\" value=\"yes\" />\n//   \n//   checkBoxTag('eula', 'accepted', false, disabled: true)\n//   // => <input disabled=\"disabled\" name=\"eula\" type=\"checkbox\" value=\"accepted\" />\nexport const checkBoxTag = function (name, value, checked, options, escape) {\n    if (value === undefined) { value = \"1\"; }\n    if (options === undefined) { options = {}; }\n    if (checked === true) { options.checked = true; }\n\n    _.defaults(options, {\n        type: \"checkbox\",\n        value: value,\n        id: sanitizeToId(name),\n        name: name\n    });\n\n    return tag(\"input\", options, escape);\n};\n\nexport default checkBoxTag;","import { tagOptions } from './../utils';\n\n// contentTag(name, [content], [options], [escape=true], [&block])\n// ================================================================\n//\n// Returns an HTML block tag of type name surrounding the content. Add HTML\n// attributes by passing an attributes hash to options. Instead of passing the\n// content as an argument, you can also use a function in which case, you pass\n// your options as the second parameter. Set escape to false to disable attribute\n// value escaping.\n//\n// Examples\n//\n//   contentTag(\"p\", \"Hello world & all!\")\n//   // => <p>Hello world &amp; all!</p>\n//\n//   contentTag(\"p\", \"Hello world & all!\", false)\n//   // => <p>Hello world & all!</p>\n//\n//   contentTag(\"div\", contentTag(\"p\", \"Hello world!\"), {class: \"strong\"})\n//   // => <div class=\"strong\"><p>Hello world!</p></div>\n//\n//   contentTag(\"select\", options, {multiple: true})\n//   // => <select multiple=\"multiple\">...options...</select>\n//   \n//   contentTag(\"div\", {class: \"strong\"}, function() {\n//      return \"Hello world!\";\n//   });\n//   // => <div class=\"strong\">Hello world!</div>\nexport const contentTag = function (name, content, options, escape) {\n    let tmp;\n\n    // Handle `name, content`, `name, content, options`,\n    // `name, content, options, escape`, `name, content, escape`, `name, block`,\n    // `name, options, block`, `name, options, escape, block`, && `name, escape, block`\n    // style arguments\n    if (typeof content === \"boolean\") {\n        escape = content;\n        content = options;\n        options = undefined;\n    } else if (typeof content === 'object') {\n        if (typeof options === 'function') {\n            tmp = options;\n            options = content;\n            content = tmp;\n        } else if (typeof options === 'boolean') {\n            tmp = content;\n            content = escape;\n            escape = options;\n            options = tmp;\n        }\n    } else if (typeof options === 'boolean') {\n        escape = options;\n        options = undefined;\n    }\n    if (typeof content === 'function') {\n        content = content();\n    }\n    if (escape || escape === undefined) {\n        content = _.escape(content);\n    }\n\n    return \"<\" + name + tagOptions(options, escape) + \">\" + content + \"</\" + name + \">\";\n};\n\nexport default contentTag;","import contentTag from './content_tag';\n\n// buttonTag(content, options), buttonTag(options, block)\n// ========================================================\n//\n// Creates a button element that defines a submit button, reset button or a\n// generic button which can be used in JavaScript, for example. You can use\n// the button tag as a regular submit tag but it isn't supported in legacy\n// browsers. However, the button tag allows richer labels such as images and\n// emphasis.\n//\n// Options\n// -------\n//      - disabled: If true, the user will not be able to use this input.\n//      - Any other key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//   buttonTag(\"Button\")\n//   // => <button name=\"button\" type=\"submit\">Button</button>\n//   \n//   buttonTag(\"Checkout\", { :disabled => true })\n//   // => <button disabled name=\"button\" type=\"submit\">Checkout</button>\n//   \n//   buttonTag({type: \"button\"}, function() {\n//      return \"Ask me!\";\n//   });\n//   // <button name=\"button\" type=\"button\"><strong>Ask me!</strong></button>\nexport const buttonTag = function (content, options) {\n    let tmp;\n\n    // Handle `content, options` && `options` style arguments\n    if (typeof content === 'object') {\n        tmp = options;\n        options = content;\n        content = tmp;\n    } else if (options === undefined) {\n        options = {}; \n    }\n\n    _.defaults(options, {name: 'button', type: 'submit'});\n    return contentTag('button', content, options);\n};\n\nexport default buttonTag;\n","import tag from './tag';\nimport { sanitizeToId } from './../utils';\n\n// textFieldTag(name, [value], [options])\n// ======================================\n//\n// Creates a standard text field. Returns the duplicated String.\n//\n// Arguments\n// ---------\n// name:    The name of the input\n// value:   The value of the input\n// options: A object with any of the following:\n//      - disabled: If set to true, the user will not be able to use this input\n//      - size: The number of visible characters that will fit in the input\n//      - maxlength: The maximum number of characters that the browser will\n//                   allow the user to enter\n//      - placehoder: The text contained in the field by default, which is\n//                    removed when the field receives focus\n//      - Any other key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//\n//   textFieldTag('name')\n//   // => <input name=\"name\" type=\"text\" />\n//   \n//   textFieldTag('query', 'Enter your search')\n//   // => <input name=\"query\" value=\"Enter your search\" type=\"text\" />\n//   \n//   textFieldTag('search', {placeholder: 'Enter search term...'})\n//   // => <input name=\"search\" placeholder=\"Enter search term...\" type=\"text\" />\n//   \n//   textFieldTag('request', {class: 'special_input'})\n//   // => <input class=\"special_input\" name=\"request\" type=\"text\" />\n//   \n//   textFieldTag('address', '', {size: 75})\n//   // => <input name=\"address\" size=\"75\" value=\"\" type=\"text\" />\n//   \n//   textFieldTag('zip', {maxlength: 5})\n//   // => <input maxlength=\"5\" name=\"zip\" type=\"text\" />\n//   \n//   textFieldTag('payment_amount', '$0.00', {disabled: true})\n//   // => <input disabled=\"disabled\" name=\"payment_amount\" value=\"$0.00\" type=\"text\" />\n//   \n//   textFieldTag('ip', '0.0.0.0', {maxlength: 15, size: 20, class: \"ip-input\"})\n//   // => <input class=\"ip-input\" maxlength=\"15\" name=\"ip\" size=\"20\" value=\"0.0.0.0\" type=\"text\" />\nexport const textFieldTag = function (name, value, options, escape) {\n\n    // Handle both `name, value` && `name, options` style arguments\n    if (value !== null && typeof value === 'object' && !(value instanceof Backbone.Model)) {\n        options = value;\n        value = undefined;\n    }\n\n    return tag('input', _.extend({\n        \"type\": 'text',\n        \"id\": sanitizeToId(name),\n        \"name\": name,\n        \"value\": value\n    }, options), escape);\n    \n};\n\nexport default textFieldTag;\n","import textFieldTag from './text_field_tag';\n\n// hiddenFieldTag(name, value = nil, options = {})\n// ===============================================\n//\n// Creates a hidden form input field used to transmit data that would be lost\n// due to HTTP's statelessness or data that should be hidden from the user.\n//\n// Options\n// -------\n//      - Any key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//   hiddenFieldTag('tags_list')\n//   // => <input name=\"tags_list\" type=\"hidden\">\n//   \n//   hiddenFieldTag('token', 'VUBJKB23UIVI1UU1VOBVI@')\n//   // => <input name=\"token\" type=\"hidden\" value=\"VUBJKB23UIVI1UU1VOBVI@\">\nexport const hiddenFieldTag = function (name, value, options, escape) {\n    if (options === undefined) { options = {}; }\n    _.defaults(options, {type: \"hidden\", id: null});\n    \n    return textFieldTag(name, value, options, escape);\n};\n\nexport default hiddenFieldTag;\n","import tag from './tag';\nimport contentTag from './content_tag';\nimport hiddenFieldTag from './hidden_field_tag';\n\n// formTag([options], [content])\n// formTag([content], [options])\n// =============================\n//\n// ==== Options\n// * <tt>:action</tt> - The url the action of the form should be set to.\n// * <tt>:multipart</tt> - If set to true, the enctype is set to \"multipart/form-data\".\n// * <tt>:method</tt> - The method to use when submitting the form, usually either \"get\" or \"post\".\n//   If \"patch\", \"put\", \"delete\", or another verb is used, a hidden input with name <tt>_method</tt>\n//   is added to simulate the verb over post. The default is \"POST\". Only set if\n//   :action is passed as an option.\n//\n// ==== Examples\n//   formTag();\n//   // => <form>\n//\n//   formTag({action: '/posts'});\n//   // => <form action=\"/posts\" method=\"post\">\n//\n//   formTag({action: '/posts/1', method: \"put\"});\n//   // => <form action=\"/posts/1\" method=\"post\"><input name=\"_method\" type=\"hidden\" value=\"put\" />\n//\n//   formTag({action: '/upload', multipart: true});\n//   // => <form action=\"/upload\" method=\"post\" enctype=\"multipart/form-data\">\n//\n//   formTag({action: '/posts'}, function() {\n//      return submitTag('Save');\n//   });\n//   // => <form action=\"/posts\" method=\"post\"><input type=\"submit\" name=\"commit\" value=\"Save\" /></form>\nexport const formTag = function (options, content) {\n    let tmp, methodOverride = '';\n    \n    if (typeof options === 'function' || typeof options === 'string') {\n        tmp = content;\n        content = options;\n        options = tmp;\n    }\n    options || (options = {});\n    \n    if (options.action && !options.method) {\n        options.method = 'post';\n    } else if (options.method && options.method !== 'get' && options.method !== 'post') {\n        methodOverride = hiddenFieldTag('_method', options.method);\n        options.method = 'post';\n    }\n    \n    if (options.multipart) {\n        options.enctype = \"multipart/form-data\";\n        delete options.multipart;\n    }\n    \n\n    if(content !== undefined) {\n        content = methodOverride + (typeof content === 'function' ? content() : content);\n\n        return contentTag('form', content, options, false);\n    }\n\n    return tag('form', options, false) + methodOverride;\n};\n\nexport default formTag;\n","import contentTag from './content_tag';\n\n// labelTag(content, options)\n// ========================================================\n//\n// Creates a label element. Accepts a block.\n//\n// Options - Creates standard HTML attributes for the tag.\n//\n// Examples\n// --------\n//   labelTag('Name')\n//   // => <label>Name</label>\n//   \n//   labelTag('name', 'Your name')\n//   // => <label for=\"name\">Your name</label>\n//   \n//   labelTag('name', nil, {for: 'id'})\n//   // => <label for=\"name\" class=\"small_label\">Name</label>\nexport const labelTag = function (content, options, escape) {\n    let tmp;\n\n    if (typeof options === 'function') {\n        tmp = content;\n        content = options;\n        options = tmp;\n    }\n\n    return contentTag('label', content, options, escape);\n};\n\nexport default labelTag;\n","import textFieldTag from './text_field_tag';\n\n// numberFieldTag(name, value = nil, options = {})\n// ===============================================\n// \n// Creates a number field.\n//\n// Options\n// -------\n//      - min:  The minimum acceptable value.\n//      - max:  The maximum acceptable value.\n//      - step: The acceptable value granularity.\n//      - Otherwise accepts the same options as text_field_tag.\n//\n// Examples\n// --------\n//   \n//   numberFieldTag('count')\n//   // => <input name=\"count\" type=\"number\">\n//   \n//   nubmerFieldTag('count', 10)\n//   // => <input\" name=\"count\" type=\"number\" value=\"10\">\n//   \n//   numberFieldTag('count', 4, {min: 1, max: 9})\n//   // => <input min=\"1\" max=\"9\" name=\"count\" type=\"number\" value=\"4\">\n//   \n//   passwordFieldTag('count', {step: 25})\n//   # => <input name=\"count\" step=\"25\" type=\"number\">\nexport const numberFieldTag = function (name, value, options) {\n    \n    // Handle both `name, value, options`, and `name, options` syntax\n    if (typeof value === 'object') {\n        options = value;\n        value = undefined;\n    }\n    \n    options = _.extend({type: 'number'}, options);\n    if (value) { options.value = value; }\n\n    return textFieldTag(name, value, options);\n};\n\nexport default numberFieldTag;\n","import contentTag from './content_tag';\n\n// optionsForSelectTag(container[, selected])\n// =======================================\n//\n// Accepts a container (hash, array, collection, your type) and returns a\n// string of option tags. Given a container where the elements respond to\n// first and last (such as a two-element array), the \"lasts\" serve as option\n// values and the \"firsts\" as option text. Hashes are turned into this\n// form automatically, so the keys become \"firsts\" and values become lasts.\n// If +selected+ is specified, the matching \"last\" or element will get the\n// selected option-tag. +selected+ may also be an array of values to be\n// selected when using a multiple select.\n//\n//   optionsForSelectTag([[\"Dollar\", \"$\"], [\"Kroner\", \"DKK\"]])\n//   // => <option value=\"$\">Dollar</option>\n//   // => <option value=\"DKK\">Kroner</option>\n//\n//   optionsForSelectTag([ \"VISA\", \"MasterCard\" ], \"MasterCard\")\n//   // => <option>VISA</option>\n//   // => <option selected>MasterCard</option>\n//\n//   optionsForSelectTag({ \"Basic\" => \"$20\", \"Plus\" => \"$40\" }, \"$40\")\n//   // => <option value=\"$20\">Basic</option>\n//   // => <option value=\"$40\" selected>Plus</option>\n//\n//   optionsForSelectTag([ \"VISA\", \"MasterCard\", \"Discover\" ], [\"VISA\", \"Discover\"])\n//   // => <option selected>VISA</option>\n//   // => <option>MasterCard</option>\n//   // => <option selected>Discover</option>\n//\n// You can optionally provide html attributes as the last element of the array.\n//\n//   optionsForSelectTag([ \"Denmark\", [\"USA\", {class: 'bold'}], \"Sweden\" ], [\"USA\", \"Sweden\"])\n//   // => <option value=\"Denmark\">Denmark</option>\n//   // => <option value=\"USA\" class=\"bold\" selected>USA</option>\n//   // => <option value=\"Sweden\" selected>Sweden</option>\n//\n//   optionsForSelectTag([[\"Dollar\", \"$\", {class: \"bold\"}], [\"Kroner\", \"DKK\", {class: \"alert\"}]])\n//   // => <option value=\"$\" class=\"bold\">Dollar</option>\n//   // => <option value=\"DKK\" class=\"alert\">Kroner</option>\n//\n// If you wish to specify disabled option tags, set +selected+ to be a hash,\n// with <tt>:disabled</tt> being either a value or array of values to be\n// disabled. In this case, you can use <tt>:selected</tt> to specify selected\n// option tags.\n//\n//   optionsForSelectTag([\"Free\", \"Basic\", \"Advanced\", \"Super Platinum\"], {disabled: \"Super Platinum\"})\n//   // => <option value=\"Free\">Free</option>\n//   // => <option value=\"Basic\">Basic</option>\n//   // => <option value=\"Advanced\">Advanced</option>\n//   // => <option value=\"Super Platinum\" disabled>Super Platinum</option>\n//\n//   optionsForSelectTag([\"Free\", \"Basic\", \"Advanced\", \"Super Platinum\"], {disabled: [\"Advanced\", \"Super Platinum\"]})\n//   // => <option value=\"Free\">Free</option>\n//   // => <option value=\"Basic\">Basic</option>\n//   // => <option value=\"Advanced\" disabled>Advanced</option>\n//   // => <option value=\"Super Platinum\" disabled>Super Platinum</option>\n//\n//   optionsForSelectTag([\"Free\", \"Basic\", \"Advanced\", \"Super Platinum\"], {selected: \"Free\", disabled: \"Super Platinum\"})\n//   // => <option value=\"Free\" selected>Free</option>\n//   // => <option value=\"Basic\">Basic</option>\n//   // => <option value=\"Advanced\">Advanced</option>\n//   // => <option value=\"Super Platinum\" disabled>Super Platinum</option>\n//\n// NOTE: Only the option tags are returned, you have to wrap this call in a\n// regular HTML select tag.\nexport const optionsForSelectTag = function (container, selected) {\n    let disabled;\n    let arrayWrap = function (data) {\n        if (_.isArray(data)) { return data; }\n        return [data];\n    };\n\n    \n    if (typeof selected !== 'object' && typeof selected !== 'function') {\n        selected = arrayWrap(selected);\n    } else if (!_.isArray(selected) && typeof selected !== 'function') {\n        disabled = typeof selected.disabled === 'function' ? selected.disabled : arrayWrap(selected.disabled);\n        selected = typeof selected.selected === 'function' ? selected.selected : arrayWrap(selected.selected);\n    }\n    \n    if(_.isArray(container)) {\n        return _.map(container, function(text) {\n            let value, options = {};\n            if (_.isArray(text)) {\n                if (typeof _.last(text) === 'object') { options = text.pop(); }\n                if (text.length === 2) {\n                    options.value = value = text[1];\n                    text = text[0];\n                } else {\n                    value = text = text[0];\n                }\n            } else {\n                value = text;\n            }\n            \n            if(typeof selected === 'function') {\n                if (selected(value)) { options.selected = true; }\n            } else if(_.contains(selected, value)) {\n                options.selected = true;\n            }\n            if(typeof disabled === 'function') {\n                if (disabled(value)) { options.disabled = true; }\n            } else if(_.contains(disabled, value)) {\n                options.disabled = true;\n            }\n            \n            return contentTag('option', text, options);\n        }).join(\"\\n\");\n    }\n    \n    return _.map(container, function(value, text) {\n        let options = {value: value};\n\n        if(typeof selected === 'function') {\n            if (selected(value)) { options.selected = true; }\n        } else if(_.contains(selected, value)) {\n            options.selected = true;\n        }\n        if(typeof disabled === 'function') {\n            if (disabled(value)) { options.disabled = true; }\n        } else if(_.contains(disabled, value)) {\n            options.disabled = true;\n        }\n        \n        return contentTag('option', text, options);\n    }).join(\"\\n\");\n};\n\nexport default optionsForSelectTag;\n","import { methodOrAttribute } from './../utils';\nimport optionsForSelectTag from './options_for_select_tag';\n\n// optionsFromCollectionForSelectTag(collection, valueMethod, textMethod, selected)\n// =============================================================================\n//\n// Returns a string of option tags that have been compiled by iterating over\n// the collection and assigning the result of a call to the valueMethod as\n// the option value and the textMethod as the option text.\n//\n//   optionsFromCollectionForSelectTag(people, 'id', 'name')\n//   // => <option value=\"person's id\">person's name</option>\n//\n// This is more often than not used inside a selectTag like this example:\n//\n//   selectTag(person, optionsFromCollectionForSelectTag(people, 'id', 'name'))\n//\n// If selected is specified as a value or array of values, the element(s)\n// returning a match on valueMethod will be selected option tag(s).\n//\n// If selected is specified as a Proc, those members of the collection that\n// return true for the anonymous function are the selected values.\n//\n// selected can also be a hash, specifying both :selected and/or :disabled\n// values as required.\n//\n// Be sure to specify the same class as the valueMethod when specifying\n// selected or disabled options. Failure to do this will produce undesired\n// results. Example:\n//\n//   optionsFromCollectionForSelectTag(people, 'id', 'name', '1')\n//\n// Will not select a person with the id of 1 because 1 (an Integer) is not\n// the same as '1' (a string)\n//\n//   optionsFromCollectionForSelectTag(people, 'id', 'name', 1)\n//\n// should produce the desired results.\nexport const optionsFromCollectionForSelectTag = function(collection, valueAttribute, textAttribute, selected) {\n    let selectedForSelect;\n    \n    let options = collection.map(function(model) {\n        return [methodOrAttribute(model, textAttribute), methodOrAttribute(model, valueAttribute)];\n    });\n    \n    if (_.isArray(selected)) {\n        selectedForSelect = selected;\n    } else if (typeof selected === 'object'){\n        selectedForSelect = {\n            selected: selected.selected,\n            disabled: selected.disabled\n        };\n    } else {\n        selectedForSelect = selected;\n    }\n\n    return optionsForSelectTag(options, selectedForSelect);\n};\n\nexport default optionsFromCollectionForSelectTag;\n","import textFieldTag from './text_field_tag';\n\n// passwordFieldTag(name = \"password\", value = nil, options = {})\n// ================================================================\n// \n// Creates a password field, a masked text field that will hide the users input\n// behind a mask character.\n//\n// Options\n// -------\n//      - disabled:  If true, the user will not be able to use this input.\n//      - size:      The number of visible characters that will fit in the input.\n//      - maxlength: The maximum number of characters that the browser will allow the user to enter.\n//      - Any other key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//   \n//   passwordFieldTag('pass')\n//   // => <input name=\"pass\" type=\"password\">\n//   \n//   passwordFieldTag('secret', 'Your secret here')\n//   // => <input\" name=\"secret\" type=\"password\" value=\"Your secret here\">\n//   \n//   passwordFieldTag('masked', nil, {class: 'masked_input_field'})\n//   // => <input class=\"masked_input_field\" name=\"masked\" type=\"password\">\n//   \n//   passwordFieldTag('token', '', {size: 15})\n//   # => <input name=\"token\" size=\"15\" type=\"password\" value=\"\">\n//   \n//   passwordFieldTag('key', null, {maxlength: 16})\n//   // => <input maxlength=\"16\" name=\"key\" type=\"password\">\n//   \n//   passwordFieldTag('confirm_pass', null, {disabled: true})\n//   // => <input disabled name=\"confirm_pass\" type=\"password\">\n//   \n//   passwordFieldTag('pin', '1234', {maxlength: 4, size: 6, class: \"pin_input\"})\n//   // => <input class=\"pin_input\" maxlength=\"4\" name=\"pin\" size=\"6\" type=\"password\" value=\"1234\">\nexport const passwordFieldTag = function (name, value, options) {\n    if (name === undefined) { name = 'password'; }\n    if (options === undefined) { options = {}; }\n    _.defaults(options, {type: \"password\"});\n\n    return textFieldTag(name, value, options);\n};\n\nexport default passwordFieldTag;\n","import tag from './tag';\nimport { sanitizeToId } from './../utils';\n\n// radioButtonTag(name, value, checked, options)\n// =============================================\n//\n// Creates a radio button; use groups of radio buttons named the same to allow\n// users to select from a group of options.\n//\n// Options\n// -------\n//      - disabled: If true, the user will not be able to use this input.\n//      - Any other key creates standard HTML attributes for the tag\n//\n// Examples\n// --------\n//   radioButtonTag('gender', 'male')\n//   // => <input name=\"gender\" type=\"radio\" value=\"male\">\n//   \n//   radioButtonTag('receive_updates', 'no', true)\n//   // => <input checked=\"checked\" name=\"receive_updates\" type=\"radio\" value=\"no\">\n//\n//   radioButtonTag('time_slot', \"3:00 p.m.\", false, {disabled: true})\n//   // => <input disabled name=\"time_slot\" type=\"radio\" value=\"3:00 p.m.\">\n//   \n//   radioButtonTag('color', \"green\", true, {class: \"color_input\"})\n//   // => <input checked class=\"color_input\" name=\"color\" type=\"radio\" value=\"green\">\nexport const radioButtonTag = function (name, value, checked, options) {\n    if (options === undefined) { options = {}; }\n    if (checked === true) { options.checked = true; }\n    _.defaults(options, {\n        type: \"radio\",\n        value: value,\n        name: name,\n        id: sanitizeToId(name)\n    });\n\n    return tag(\"input\", options);\n};\n\nexport default radioButtonTag;\n","import { sanitizeToId } from './../utils';\nimport contentTag from './content_tag';\n\n// selectTag(name, optionTags, options)\n// ====================================\n//\n// Creates a dropdown selection box, or if the :multiple option is set to true,\n// a multiple choice selection box.\n//\n// Options\n// -------\n//    - multiple:      If set to true the selection will allow multiple choices.\n//    - disabled:      If set to true, the user will not be able to use this input.\n//    - includeBlank:  If set to true, an empty option will be created, can pass a string to use as empty option content\n//    - prompt:        Create a prompt option with blank value and the text asking user to select something\n//    - Any other key creates standard HTML attributes for the tag.\n//\n// Examples\n// --------\n//   selectTag(\"people\", options_for_select({ \"Basic\": \"$20\"}))\n//   // <select name=\"people\"><option value=\"$20\">Basic</option></select>\n//   \n//   selectTag(\"people\", \"<option>David</option>\")\n//   // => <select name=\"people\"><option>David</option></select>\n//   \n//   selectTag(\"count\", \"<option>1</option><option>2</option><option>3</option>\")\n//   // => <select name=\"count\"><option>1</option><option>2</option><option>3</option></select>\n//   \n//   selectTag(\"colors\", \"<option>Red</option><option>Green</option><option>Blue</option>\", {multiple: true})\n//   // => <select multiple=\"multiple\" name=\"colors[]\"><option>Red</option>\n//   //    <option>Green</option><option>Blue</option></select>\n//   \n//   selectTag(\"locations\", \"<option>Home</option><option selected='selected'>Work</option><option>Out</option>\")\n//   // => <select name=\"locations\"><option>Home</option><option selected='selected'>Work</option>\n//   //    <option>Out</option></select>\n//   \n//   selectTag(\"access\", \"<option>Read</option><option>Write</option>\", {multiple: true, class: 'form_input'})\n//   // => <select class=\"form_input\" multiple=\"multiple\" name=\"access[]\"><option>Read</option>\n//   //    <option>Write</option></select>\n//   \n//   selectTag(\"people\", options_for_select({ \"Basic\": \"$20\"}), {includeBlank: true})\n//   // => <select name=\"people\"><option value=\"\"></option><option value=\"$20\">Basic</option></select>\n//   \n//   selectTag(\"people\", options_for_select({\"Basic\": \"$20\"}), {prompt: \"Select something\"})\n//   // => <select name=\"people\"><option value=\"\">Select something</option><option value=\"$20\">Basic</option></select>\n//   \n//   selectTag(\"destination\", \"<option>NYC</option>\", {disabled: true})\n//   // => <select disabled name=\"destination\"><option>NYC</option></select>\n//   \n//   selectTag(\"credit_card\", options_for_select([ \"VISA\", \"MasterCard\" ], \"MasterCard\"))\n//   // => <select name=\"credit_card\"><option>VISA</option><option selected>MasterCard</option></select>\nexport const selectTag = function (name, optionTags, options) {\n    let tagName = name;\n    if (options === undefined) { options = {}; }\n    if (options.multiple && tagName.slice(-2) !== \"[]\") { tagName = tagName + \"[]\"; }\n    _.defaults(options, {\n        id: sanitizeToId(name),\n        name: tagName\n    });\n\n    if (options.includeBlank) {\n        let content = typeof options.includeBlank == \"string\" ? options.includeBlank : \"\";\n        optionTags = contentTag('option', content, {value: ''}) + optionTags;\n        delete options.includeBlank;\n    }\n\n    if (options.prompt) {\n        if (options.prompt === true) { options.prompt = 'Select'; }\n        optionTags = contentTag('option', options.prompt, {value: ''}) + optionTags;\n        delete options.prompt;\n    }\n\n    return contentTag('select', optionTags, options, false);\n};\n\nexport default selectTag;\n","import tag from './tag';\n\n// submitTag(value=\"Save\", options)\n// =================================\n//\n// Creates a submit button with the text value as the caption.\n//\n// Options\n// -------\n//    - disabled:      If set to true, the user will not be able to use this input.\n//    - Any other key creates standard HTML attributes for the tag.\n//   \n//   submitTag()\n//   // => <input name=\"commit\" type=\"submit\" value=\"Save\">\n//   \n//   submitTag \"Edit this article\"\n//   // => <input name=\"commit\" type=\"submit\" value=\"Edit this article\">\n//   \n//   submitTag(\"Save edits\", {disabled: true})\n//   // => <input disabled name=\"commit\" type=\"submit\" value=\"Save edits\">\n//   \n//   submitTag(nil, {class: \"form_submit\"})\n//   // => <input class=\"form_submit\" name=\"commit\" type=\"submit\">\n//   \n//   submitTag(\"Edit\", class: \"edit_button\")\n//   // => <input class=\"edit_button\" name=\"commit\" type=\"submit\" value=\"Edit\">\nexport const submitTag = function (value, options) {\n    if (options === undefined) { options = {}; }\n    if (!value) { value = 'Save'; }\n    _.defaults(options, {\n        type: 'submit',\n        name: 'commit',\n        id: null,\n        value: value\n    });\n\n    return tag('input', options);\n};\n\nexport default submitTag;\n","import contentTag from './content_tag';\nimport { sanitizeToId } from './../utils';\n\n// textAreaTag(name, [content], [options], [escape=true])\n// =========================================\n//\n// Creates a text input area; use a textarea for longer text inputs such as\n// blog posts or descriptions.\n//\n// Options\n// -------\n//    - size: A string specifying the dimensions (columns by rows) of the textarea (e.g., \"25x10\").\n//    - rows: Specify the number of rows in the textarea\n//    - cols: Specify the number of columns in the textarea\n//    - disabled: If set to true, the user will not be able to use this input.\n//    - Any other key creates standard HTML attributes for the tag.\n//\n// Examples\n// --------\n//   \n//   textAreaTag('post')\n//   // => <textarea name=\"post\"></textarea>\n//   \n//   textAreaTag('bio', user.bio)\n//   // => <textarea name=\"bio\">This is my biography.</textarea>\n//   \n//   textAreaTag('body', null, {rows: 10, cols: 25})\n//   // => <textarea cols=\"25\" name=\"body\" rows=\"10\"></textarea>\n//   \n//   textAreaTag('body', null, {size: \"25x10\"})\n//   // => <textarea name=\"body\" cols=\"25\" rows=\"10\"></textarea>\n//   \n//   textAreaTag('description', \"Description goes here.\", {disabled: true})\n//   // => <textarea disabled name=\"description\">Description goes here.</textarea>\n//   \n//   textAreaTag('comment', null, {class: 'comment_input'})\n//   // => <textarea class=\"comment_input\" name=\"comment\"></textarea>\nexport const textAreaTag = function (name, content, options, escape) {\n    if (options === undefined) { options = {}; }\n    if (escape === undefined) { escape = true; }\n    _.defaults(options, {\n        id: sanitizeToId(name),\n        name: name\n    });\n\n    if (options.size) {\n        options.cols = options.size.split('x')[0];\n        options.rows = options.size.split('x')[1];\n        delete options.size;\n    }\n\n    if (escape) { content = _.escape(content); }\n\n    return contentTag('textarea', content, options, false);\n};\n\nexport default textAreaTag;\n","import contentTag from './content_tag';\n\n// timeTag(date, [options], [value])\n// =================================\n//\n// Returns an html time tag for the given date or time.\n//\n// Examples\n// --------\n//\n//   timeTag(Date.today)\n//   // => <time datetime=\"2010-11-04\">November 04, 2010</time>\n//\n//   timeTag(Date.now)\n//   // => <time datetime=\"2010-11-04T17:55:45+01:00\">November 04, 2010 17:55</time>\n//\n//   timeTag(Date.yesterday, 'Yesterday')\n//   // => <time datetime=\"2010-11-03\">Yesterday</time>\n//\n//   timeTag(Date.today, {pubdate: true})\n//   // => <time datetime=\"2010-11-04\" pubdate=\"pubdate\">November 04, 2010</time>\n//\n//   timeTag(Date.today, {datetime: Date.today.strftime('%G-W%V')})\n//   // => <time datetime=\"2010-W44\">November 04, 2010</time>\n//\n//   time_tag(Date.now, function() {\n//     return '<span>Right now</span>';\n//   });\n//   // => <time datetime=\"2010-11-04T17:55:45+01:00\"><span>Right now</span></time>\nexport const timeTag = function (date, content, options) {\n    let tmp;\n\n    // handle both (date, opts, func || str) and (date, func || str, opts)\n    if (typeof content === 'object') {\n        tmp = options;\n        options = content;\n        content = tmp;\n    }\n    options || (options = {});\n    \n    if (!content) {\n        content = options.format ? date.strftime(options.format) : date.toString();\n    }\n    if (options.format) { delete options.format; }\n    if (!options.datetime) { options.datetime = date.toISOString(); }\n    \n\n    return contentTag('time', content, options);\n};\n\nexport default timeTag;\n","import { labelTag } from '../form_tag_helpers';\nimport { addErrorClassToOptions, sanitizeToId, tagNameForModelAttribute } from '../utils';\n\n// label(model, attribute, content, options)\n// =========================================\n//\n// Returns a label tag tailored for labelling an input field for a specified\n// attribute (identified by method) on an object assigned to the template\n// (identified by object). The text of label will default to the attribute\n// name unless a translation is found in the current I18n locale (through\n// helpers.label.<modelname>.<attribute>) or you specify it explicitly.\n// Additional options on the label tag can be passed as a hash with options.\n// These options will be tagged onto the HTML as an HTML element attribute as\n// in the example shown, except for the :value option, which is designed to\n// target labels for #radioButton tags (where the value is used in the ID\n// of the input tag).\n//\n// Examples\n// --------\n//   label(post, \"title\")\n//   // => <label for=\"post_title\">Title</label>\n//   \n//   label(post, \"title\", \"A short title\")\n//   // => <label for=\"post_title\">A short title</label>\n//   \n//   label(post, \"title\", \"A short title\", {class: \"title_label\"})\n//   // => <label for=\"post_title\" class=\"title_label\">A short title</label>\n//   \n//   label(post, \"privacy\", \"Public Post\", {value: \"public\"})\n//   // => <label for=\"post_privacy_public\">Public Post</label>\n//   \n//   label(post, \"terms\", function() {\n//       return 'Accept <a href=\"/terms\">Terms</a>.';\n//   })\n//   // => <label for=\"post_privacy_public\">Public Post</label>\nexport const label = function (model, attribute, content, options, escape) {\n    let tmp;\n    if (typeof content === 'object') {\n        tmp = options;\n        options = content;\n        content = tmp;\n    }\n    \n    if (options === undefined) { options = {}; }\n    if (content === undefined) { content = attribute.humanize(); }\n    if (typeof content === 'function') { content = content(); }        \n    if (!options['for']) {\n        let name = tagNameForModelAttribute(model, attribute);\n        options['for'] = sanitizeToId(name);\n    }\n    \n    addErrorClassToOptions(model, attribute, options);\n    \n    return labelTag(content, options, escape);\n};\n\nexport default label;","import { checkBoxTag } from '../form_tag_helpers/check_box_tag';\nimport { label } from '../form_helpers/label';\nimport { tagNameForModelAttribute, sanitizeToId,  } from '../utils';\n\nexport function CheckBoxGroupBuilder(model, attribute, options) {\n    let modelName;\n    options = _.extend({}, options);\n    \n    this.model = model;\n    this.attribute = attribute;\n    this.options = options;\n\n    modelName = _.has(options, 'as') ? options.as : this.model.baseModel.modelName.paramKey;\n    if (options.namespace) {\n        if (options.as !== null) {\n            this.options.namespace = options.namespace + '[' + modelName + ']';\n        }\n    } else {\n        this.options.namespace = modelName;\n    }\n}\n\n// TODO: options passed to the helpers can be made into a helper\nCheckBoxGroupBuilder.prototype = {\n\n    checkBox: function(checkedValue, options) {\n        let values = this.model.get(this.attribute);\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, this.attribute, {namespace: this.options.namespace});\n        } else if (!options.name) {\n            options.name = tagNameForModelAttribute(this.model, this.attribute);\n        }\n        \n        if (!options.id) {\n            options.id = sanitizeToId(options.name) + '_' + checkedValue;\n        }\n        \n        return checkBoxTag(options.name, checkedValue, _.contains(values, checkedValue), options);\n    },\n    \n    label: function(value, content, options, escape) {\n        options || (options = {});\n        \n        //TODO shouldn't options.name be options.for?\n        if (!options.name && !options['for']) {\n            options['for'] = tagNameForModelAttribute(this.model, this.attribute, {namespace: this.options.namespace});\n            options['for'] = sanitizeToId(options['for']) + '_' + value;\n        }\n        \n        return label(this.model, this.attribute, content, options, escape);\n    }\n    \n};\n\nexport default CheckBoxGroupBuilder;","import { CheckBoxGroupBuilder } from '../builders';\n\n// checkBoxGroup(model, attribute, options = {}, content = func(f))\n// ================================================================\n// \n// Usefull for rendering an checkbox group. checkBox generates an auxiliary\n// hidden field before the very check box that has the same name to mimic an\n// unchecked box. Using checkBox within checkBoxGroup will not generate the\n// auxiliary field.\n//\n// A useful example of this is when you have an array of items to choose from.\n//\n// Examples\n// --------\n//   checkBoxGroup(account, 'roles', function (f) {\n//       return f.checkBox('admin') + \"\\n\" + f.checkBox('agent', { class: 'agent_check' });\n//   });\n//   // => <input checked id=\"account_roles_admin\" type=\"checkbox\" name=\"account[roles][]\" value=\"admin\">\n//   // => <input checked class=\"agent_check\" id=\"account_roles_agent\" type=\"checkbox\" name=\"account[roles][]\" value=\"agent\">\nexport const checkBoxGroup = function (model, attribute, options, content) {\n    if (typeof options === 'function') {\n        content = options;\n        options = {};\n    }\n    \n    let builder = new CheckBoxGroupBuilder(model, attribute, options);\n    \n    return content(builder);\n};\n\nexport default checkBoxGroup;\n","import { addErrorClassToOptions, tagNameForModelAttribute } from '../utils';\nimport { hiddenFieldTag, checkBoxTag } from '../form_tag_helpers';\n\n// checkBox(model, attribute, options={}, checkedValue=\"true\", uncheckedValue=\"false\")\n// =====================================================================================\n//\n// Returns a checkbox tag tailored for accessing a specified attribute (identified\n// by attribute) on an object. This object must be an instance of Viking.Model.\n// Additional options on the input tag can be passed as a hash with options.\n// The checkedValue defaults to the string `\"true\"` while the default\n// uncheckedValue is set to the string `\"false\"`.\n//\n// Gotcha\n// ------\n//\n// The HTML specification says unchecked check boxes are not successful, and\n// thus web browsers do not send them. Unfortunately this introduces a gotcha:\n// if an Invoice model has a paid flag, and in the form that edits a paid invoice\n// the user unchecks its check box, no paid parameter is sent. So, any\n// mass-assignment idiom like\n//\n//   @invoice.update(params[:invoice])\n//\n// wouldn't update the flag.\n//\n// To prevent this the helper generates an auxiliary hidden field before the very\n// check box. The hidden field has the same name and its attributes mimic an\n// unchecked check box.\n//\n// This way, the client either sends only the hidden field (representing the\n// check box is unchecked), or both fields. Since the HTML specification says\n// key/value pairs have to be sent in the same order they appear in the form,\n// and parameters extraction gets the last occurrence of any repeated key in\n// the query string, that works for ordinary forms.\n//\n// Unfortunately that workaround does not work when the check box goes within an\n// array-like parameter, as in\n// \n// <%= fields_for \"project[invoice_attributes][]\", invoice, index: nil do |form| %>\n//   <%= form.check_box :paid %>\n//   ...\n// <% end %>\n//\n// because parameter name repetition is precisely what Rails seeks to distinguish\n// the elements of the array. For each item with a checked check box you get an\n// extra ghost item with only that attribute, assigned to \"0\".\n//\n// In that case it is preferable to either use check_box_tag or to use hashes\n// instead of arrays.\n//\n// Examples\n// --------\n//   // Let's say that post.get('validated') is `true`:\n//   checkBox(post, \"validated\")\n//   // => <input name=\"post[validated]\" type=\"hidden\" value=\"false\">\n//   //    <input checked type=\"checkbox\" name=\"post[validated]\" value=\"true\">\n//   \n//   // Let's say that puppy.get('gooddog') is `\"no\"`:\n//   checkBox(\"puppy\", \"gooddog\", {}, \"yes\", \"no\")\n//   // => <input name=\"puppy[gooddog]\" type=\"hidden\" value=\"no\">\n//   //    <input type=\"checkbox\" name=\"puppy[gooddog]\" value=\"yes\">\n//   \n//   checkBox(\"eula\", \"accepted\", { class: 'eula_check' }, \"yes\", \"no\")\n//   // => <input name=\"eula[accepted]\" type=\"hidden\" value=\"no\">\n//   //    <input type=\"checkbox\" class=\"eula_check\" name=\"eula[accepted]\" value=\"yes\">\nexport const checkBox = function (model, attribute, options, checkedValue, uncheckedValue, escape) {\n    let output = '';\n    let value = model.get(attribute);\n\n    if (options === undefined) { options = {}; }\n    if (checkedValue === undefined) { checkedValue = true; }\n    if (uncheckedValue === undefined) { uncheckedValue = false; }\n    addErrorClassToOptions(model, attribute, options);\n\n    let name = options.name || tagNameForModelAttribute(model, attribute);    \n    output += hiddenFieldTag(name, uncheckedValue, undefined, escape);\n    output += checkBoxTag(name, checkedValue, checkedValue === value, options, escape);\n    \n    return output;\n};\n\nexport default checkBox;\n","import { tagNameForModelAttribute, methodOrAttribute } from '../utils';\nimport { selectTag, optionsFromCollectionForSelectTag } from '../form_tag_helpers';\n\n// collectionSelect(model, attribute, collection, valueAttribute, textAttribute, options)\n// ====================================================================================\n//\n// Returns <select> and <option> tags for the collection of existing return\n// values of method for object's class. The value returned from calling method\n// on the instance object will be selected. If calling method returns nil, no\n// selection is made without including :prompt or :includeBlank in the options\n// hash.\n//\n// The :value_method and :text_method parameters are methods to be called on\n// each member of collection. The return values are used as the value attribute\n// and contents of each <option> tag, respectively. They can also be any object\n// that responds to call, such as a proc, that will be called for each member\n// of the collection to retrieve the value/text.\n//\n// Example object structure for use with this method:\n//\n//   Post = Viking.Model.extend('post', {\n//       belongsTo: ['author']\n//   });\n//   \n//   Author = Viking.Model.extend('author', {\n//       hasMany: ['posts'],\n//       \n//       nameWithInitial: function() {\n//           return this.get('first_name')[0] + '. ' + this.get(\"last_name\");\n//       }\n//   });\n// \n// Sample usage (selecting the associated Author for an instance of Post):\n//\n//   collectionSelect(post, 'author_id', Author.all, 'id', 'nameWithInitial', {prompt: true})\n// \n// If post.get('author_id') is already 1, this would return:\n// \n//   <select name=\"post[author_id]\">\n//     <option value=\"\">Please select</option>\n//     <option value=\"1\" selected>D. Heinemeier Hansson</option>\n//     <option value=\"2\">D. Thomas</option>\n//     <option value=\"3\">M. Clark</option>\n//   </select>\nexport const collectionSelect = function (model, attribute, collection, valueAttribute, textAttribute, options) {\n    if (options === undefined) { options = {}; }\n\n    let optionOptions = _.pick(options, 'selected');\n    let selectOptions = _.omit(options, 'selected');\n    if (model.get(attribute) && optionOptions.selected === undefined) {\n        optionOptions.selected = methodOrAttribute(model.get(attribute), valueAttribute);\n    }\n    \n    let name = options.name || tagNameForModelAttribute(model, attribute);\n    let optionsTags = optionsFromCollectionForSelectTag(collection, valueAttribute, textAttribute, selectOptions);\n    return selectTag(name, optionsTags, selectOptions);\n};\n\nexport default collectionSelect;\n","import { FormBuilder } from '../builders';\nimport { contentTag, hiddenFieldTag } from '../form_tag_helpers';\n\n// formFor(model, options = {}, content = func(f))\n// ===============================================\n// \n// Creates a FormBuilder for the model and passes it as the first argument to\n// the `content` function.\n//\n// Examples\n// --------\n//   formFor(account, function (f) { return f.hiddenField('pass_confirm'); })\n//   // => <input type=\"hidden\" name=\"account[pass_confirm]\" value=\"\">\nexport const formFor = function (model, options, content) {\n    if (typeof options === 'function') {\n        content = options;\n        options = {};\n    }\n    \n    let method = options.method;\n    if (options.multipart === true) {\n        options.enctype = \"multipart/form-data\";\n        options.method = 'post';\n        delete options.multipart;\n    } else if (!options.method) {\n        options.method = 'get';\n    }\n\n    let builder = new FormBuilder(model, options);\n    if ( (options.method !== 'get' && options.method !== 'post') || (method && method !== options.method) ) {\n        options.method = 'post';\n        content = _.wrap(content, function(func, form) {\n            let hiddenInput = hiddenFieldTag('_method', method);\n            return contentTag('div', hiddenInput, {style: 'margin:0;padding:0;display:inline'}, false) + func(builder);\n        });\n    }\n    \n    return contentTag('form', content(builder), options, false);\n};\n\nexport default formFor;\n","import { hiddenFieldTag } from '../form_tag_helpers';\nimport { tagNameForModelAttribute } from '../utils';\n\n// hiddenField(model, attribute, options = {})\n// =========================================\n// \n// Returns a hidden input tag tailored for accessing a specified attribute\n// (identified by method) on an object assigned to the template (identified\n// by object). Additional options on the input tag can be passed as a hash\n// with options. These options will be tagged onto the HTML as an HTML element\n// attribute as in the example shown.\n//\n// Examples\n// --------\n//   hiddenField(:signup, :pass_confirm)\n//   // => <input type=\"hidden\" name=\"signup[pass_confirm]\" value=\"\">\n//   \n//   hiddenField(:post, :tag_list)\n//   // => <input type=\"hidden\" name=\"post[tag_list]\" value=\"tag1 tag2 tag3\">\n//   \n//   hiddenField(:user, :token)\n//   // => <input type=\"hidden\" name=\"user[token]\" value=\"token\">\nexport const hiddenField = function (model, attribute, options) {\n    let value = model.get(attribute);\n    let name = tagNameForModelAttribute(model, attribute);\n    \n    return hiddenFieldTag(name, (value || ''), options);\n};\n\nexport default hiddenField;\n","import { numberFieldTag } from '../form_tag_helpers';\nimport { addErrorClassToOptions, tagNameForModelAttribute } from '../utils';\n\n// numberField(model, attribute, options)\n// ======================================\n//\n// Returns an input tag of the \"number\" type tailored for accessing a specified\n// attribute on the model. Additional options on the input tag can be passed as\n// a hash with options. These options will be tagged onto the HTML as an HTML\n// element attribute as in the example shown.\n//\n// Examples\n// --------\n//   numberField(user, 'age', {min: 0, max: 100})\n//   // => <input id=\"user_age\" name=\"user[age]\" type=\"number\" value=\"27\">\n//   \n//   numberField(account, 'requests', {class: \"form_input\"})\n//   // => <input class=\"form_input\" id=\"account_requests\" name=\"account[requests]\" type=\"number\" value=\"27\">\nexport const numberField = function (model, attribute, options) {\n    options = _.extend({}, options);\n    let name = options.name || tagNameForModelAttribute(model, attribute);\n\n    addErrorClassToOptions(model, attribute, options);\n    \n    return numberFieldTag(name, model.get(attribute), options);\n};\n\nexport default numberField;","import { passwordFieldTag } from '../form_tag_helpers';\nimport { addErrorClassToOptions, tagNameForModelAttribute } from '../utils';\n\n// passwordField(model, attribute, options)\n// ========================================\n//\n// Returns an input tag of the \"password\" type tailored for accessing a specified\n// attribute on the model. Additional options on the input tag can be passed as\n// a hash with options. These options will be tagged onto the HTML as an HTML\n// element attribute as in the example shown. For security reasons this field\n// is blank by default; pass value via options if this is not desired.\n//\n// Examples\n// --------\n//   passwordField(user, 'pass', {size: 20})\n//   // => <input id=\"login_pass\" name=\"login[pass]\" type=\"password\" size=\"20\">\n//   \n//   passwordField(account, 'secret', {class: \"form_input\", value: account.get('secret')})\n//   // => <input class=\"form_input\" id=\"account_secret\" name=\"account[secret]\" type=\"password\" value=\"unkown\">\nexport const passwordField = function (model, attribute, options) {\n    options || (options = {});\n    let name = options.name || tagNameForModelAttribute(model, attribute);\n\n    if (options === undefined) { options = {}; }\n    addErrorClassToOptions(model, attribute, options);\n    \n    return passwordFieldTag(name, undefined, options);\n};\n\nexport default passwordField;\n","import { radioButtonTag } from '../form_tag_helpers';\nimport { addErrorClassToOptions, sanitizeToId, tagNameForModelAttribute } from '../utils';\n\n// radioButton(model, attribute, tagValue, options)\n// ==================================================\n//\n// Returns a radio button tag for accessing a specified attribute on a model.\n// If the current value of attribute is tagValue the radio button will be checked.\n//\n// To force the radio button to be checked pass checked: true in the options hash.\n// You may pass HTML options there as well.\n//   \n//   // Let's say that @post.category returns \"rails\":\n//   radioButton(\"post\", \"category\", \"rails\")\n//   radioButton(\"post\", \"category\", \"java\")\n//   // => <input type=\"radio\" id=\"post_category_rails\" name=\"post[category]\" value=\"rails\" checked>\n//   //    <input type=\"radio\" id=\"post_category_java\" name=\"post[category]\" value=\"java\">\n//   \n//   radioButton(\"user\", \"receive_newsletter\", \"yes\")\n//   radioButton(\"user\", \"receive_newsletter\", \"no\")\n//   // => <input type=\"radio\" id=\"user_receive_newsletter_yes\" name=\"user[receive_newsletter]\" value=\"yes\">\n//   //    <input type=\"radio\" id=\"user_receive_newsletter_no\" name=\"user[receive_newsletter]\" value=\"no\" checked>\nexport const radioButton = function (model, attribute, tagValue, options) {\n    if (options === undefined) { options = {}; }\n    let name = options.name || tagNameForModelAttribute(model, attribute);\n\n    _.defaults(options, {\n        id: sanitizeToId(name + \"_\" + tagValue)\n    });\n    addErrorClassToOptions(model, attribute, options);\n    \n    let value = tagValue;\n    if (value === undefined || value === null) {\n        value = \"\";\n    }\n    \n    return radioButtonTag(name, value, tagValue === model.get(attribute), options);\n};\n\nexport default radioButton;\n","import { selectTag, optionsForSelectTag } from '../form_tag_helpers';\nimport { tagNameForModelAttribute } from '../utils';\n\n// Create a select tag and a series of contained option tags for the provided\n// object and method. The option currently held by the object will be selected,\n// provided that the object is available.\n//\n// There are two possible formats for the +choices+ parameter, corresponding\n// to other helpers' output:\n//\n// * A flat collection (see +optionsForSelect+).\n//\n// * A nested collection (see +groupedOptionsForSelect+).\n//\n// For example:\n//\n//   select(\"post\", \"person_id\", _.map(people, function(p) { return [p.name, p.id] }), { include_blank: true })\n//\n// would become:\n//\n//   <select name=\"post[person_id]\">\n//     <option value=\"\"></option>\n//     <option value=\"1\" selected=\"selected\">David</option>\n//     <option value=\"2\">Sam</option>\n//     <option value=\"3\">Tobias</option>\n//   </select>\n//\n// assuming the associated person has ID 1.\n//\n// By default, `post.get('person_id')` is the selected option. Specify\n// `selected: value` to use a different selection or `selected: nil` to leave\n// all options unselected. Similarly, you can specify values to be disabled in\n// the option tags by specifying the `:disabled` option. This can either be a\n// single value or an array of values to be disabled.\n//\n// ==== Gotcha\n//\n// The HTML specification says when +multiple+ parameter passed to select and\n// all options got deselected web browsers do not send any value to server.\n// Unfortunately this introduces a gotcha: if an +User+ model has many +roles+\n// and have +role_ids+ accessor, and in the form that edits roles of the user\n// the user deselects all roles from +role_ids+ multiple select box, no\n// +role_ids+ parameter is sent. So, any mass-assignment idiom like\n//\n//   @user.update(params[:user])\n//\n// wouldn't update roles.\n//\n// To prevent this the helper generates an auxiliary hidden field before every\n// multiple select. The hidden field has the same name as multiple select and\n// blank value.\n//\n// This way, the client either sends only the hidden field (representing\n// the deselected multiple select box), or both fields. Since the HTML\n// specification says key/value pairs have to be sent in the same order they\n// appear in the form, and parameters extraction gets the last occurrence of\n// any repeated key in the query string, that works for ordinary forms.\n//\n// In case if you don't want the helper to generate this hidden field you can\n// specify `include_hidden: false` option.\nexport const select = function (model, attribute, collection, options) {\n    if (options === undefined) { options = {}; }\n\n    let name = options['name'] || tagNameForModelAttribute(model, attribute);\n    let optionOptions = _.pick(options, 'selected');\n    let selectOptions = _.omit(options, 'selected');\n    if (model.get(attribute) && optionOptions.selected === undefined) {\n        optionOptions.selected = model.get(attribute);\n    }\n    if (selectOptions.multiple === undefined && model.associations[attribute] && model.associations[attribute].macro === \"hasMany\") {\n        selectOptions.multiple = true;\n    }\n    return selectTag(name, optionsForSelectTag(collection, optionOptions), selectOptions);\n};\n\nexport default select;\n","import { textAreaTag } from '../form_tag_helpers';\nimport { addErrorClassToOptions, tagNameForModelAttribute } from '../utils';\n\n// textArea(model, attribute, options)\n// ====================================\n//\n// Returns a textarea opening and closing tag set tailored for accessing a\n// specified attribute on a model. Additional options on the input tag can be\n// passed as a hash with options.\n//\n// Examples\n// ========\n//   textArea(post, 'body', {cols: 20, rows: 40})\n//   // => <textarea cols=\"20\" rows=\"40\" id=\"post_body\" name=\"post[body]\">\n//   //      post body\n//   //    </textarea>\n//   \n//   textArea(comment, 'text', {size: \"20x30\"})\n//   // => <textarea cols=\"20\" rows=\"30\" id=\"comment_text\" name=\"comment[text]\">\n//   //      comment text\n//   //    </textarea>\n//   \n//   textArea(application, 'notes', {cols: 40, rows: 15, class: 'app_input'})\n//   // => <textarea cols=\"40\" rows=\"15\" id=\"application_notes\" name=\"application[notes]\" class=\"app_input\">\n//   //      application notes\n//   //    </textarea>\n//   \n//   textArea(entry, 'body', {size: \"20x20\", disabled: true})\n//   // => <textarea cols=\"20\" rows=\"20\" id=\"entry_body\" name=\"entry[body]\" disabled>\n//   //      entry body\n//   //    </textarea>\nexport const textArea = function (model, attribute, options) {\n    let name = tagNameForModelAttribute(model, attribute);\n    \n    if (options === undefined) { options = {}; }\n    addErrorClassToOptions(model, attribute, options);\n    \n    return textAreaTag(name, model.get(attribute), options);\n};\n\nexport default textArea;\n","import { addErrorClassToOptions, tagNameForModelAttribute } from '../utils';\nimport { textFieldTag } from '../form_tag_helpers/text_field_tag';\n\n// textField(model, attribute, options)\n// ====================================\n//\n// Returns an input tag of the \"text\" type tailored for accessing a specified\n// attribute on a model. Additional options on the input tag can be passed as\n// a hash with options. These options will be tagged onto the HTML as an HTML\n// element attribute as in the example shown.\n//\n// Examples\n// ========\n//   text_field(post, \"title\", {size: 20})\n//   // => <input id=\"post_title\" name=\"post[title]\" size=\"20\" type=\"text\" value=\"title\">\n//   \n//   text_field(post, \"title\", {class: \"create_input\"})\n//   // => <input class=\"create_input\" id=\"post_title\" name=\"post[title]\" type=\"text\" value=\"title\">\nexport const textField = function (model, attribute, options) {\n    if (options === undefined) { options = {}; }\n    addErrorClassToOptions(model, attribute, options);\n\n    let name = options['name'] || tagNameForModelAttribute(model, attribute);\n    let value = model.get(attribute)\n    value = value && typeof value === 'object' ? value.toString() : value\n    return textFieldTag(name, value, options);\n};\n\nexport default textField;\n","import {\n    textArea, textField, radioButton, select, collectionSelect, passwordField,\n    checkBox, hiddenField, label, numberField, checkBoxGroup\n} from '../form_helpers';\n\nimport { sanitizeToId, tagNameForModelAttribute } from '../utils';\n\nexport function FormBuilder(model, options) {\n    let modelName;\n\n    options = _.extend({}, options);\n    \n    this.model = model;\n    this.options = options;\n\n    modelName = _.has(options, 'as') ? options.as : this.model.baseModel.modelName.paramKey;\n    if (options.namespace) {\n        if (options.as !== null) {\n            this.options.namespace = options.namespace + '[' + modelName + ']';\n        }\n    } else {\n        this.options.namespace = modelName;\n    }\n}\n\n// TODO: options passed to the helpers can be made into a helper\nFormBuilder.prototype = {\n\n    checkBox: function(attribute, options, checkedValue, uncheckedValue, escape) {\n        options || (options = {});\n\n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return checkBox(this.model, attribute, options, checkedValue, uncheckedValue, escape);\n    },\n\n    collectionSelect: function(attribute, collection, valueAttribute, textAttribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return collectionSelect(this.model, attribute, collection, valueAttribute, textAttribute, options);\n    },\n\n    hiddenField: function(attribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return hiddenField(this.model, attribute, options);\n    },\n    \n    label: function(attribute, content, options, escape) {\n        options || (options = {});\n        \n        //TODO shouldn't options.name be options.for?\n        if (!options['for'] && !options.name && this.options.namespace) {\n            options['for'] = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n            options['for'] = sanitizeToId(options['for']);\n        }\n        \n        return label(this.model, attribute, content, options, escape);\n    },\n    \n    number: function(attribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return numberField(this.model, attribute, options);\n    },\n\n    passwordField: function(attribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return passwordField(this.model, attribute, options);\n    },\n    \n    radioButton: function(attribute, tagValue, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return radioButton(this.model, attribute, tagValue, options);\n    },\n    \n    select: function(attribute, collection, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return select(this.model, attribute, collection, options);\n    },\n\n    textArea: function(attribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return textArea(this.model, attribute, options);\n    },\n\n    textField: function(attribute, options) {\n        options || (options = {});\n        \n        if (!options.name && this.options.namespace) {\n            options.name = tagNameForModelAttribute(this.model, attribute, {namespace: this.options.namespace});\n        }\n        \n        return textField(this.model, attribute, options);\n    },\n    \n    checkBoxGroup: function(attribute, options, content) {\n        if (typeof options === 'function') {\n            content = options;\n            options = {};\n        }\n\n        if (!options.namespace && this.options.namespace) {\n            options.namespace = this.options.namespace;\n        }\n\n        return checkBoxGroup(this.model, attribute, options, content);\n    },\n    \n    fieldsFor: function(attribute, records, options, content) {\n        let builder;\n        \n        if (records instanceof Viking.Model) {\n            records = [records];\n        }\n\n        if (!_.isArray(records) && !(records instanceof Viking.Collection)) {\n            content = options;\n            options = records;\n            records = undefined;\n        }\n\n        if (typeof options === 'function') {\n            content = options;\n            options = {};\n        }\n        \n        if (this.model.get(attribute) instanceof Viking.Collection) {\n            let superOptions = this.options;\n            let parentModel = this.model;\n            records || (records = this.model.get(attribute));\n            if (records instanceof Viking.Collection) {\n                records = records.models;\n            }\n\n            return _.map(records, function(model) {\n                let localOptions = _.extend({'as': null}, options);\n                if (!options.namespace) {\n                    if (superOptions.namespace) {\n                        localOptions.namespace = superOptions.namespace + '[' + attribute + '][' + model.cid + ']';\n                    } else {\n                        localOptions.namespace = parentModel.baseModel.modelName.paramKey + '[' + attribute + '][' + model.cid + ']';\n                    }\n                }\n                \n                builder = new FormBuilder(model, localOptions);\n                \n                if (model.id) {\n                    return builder.hiddenField('id') + content(builder);\n                } else {\n                    return content(builder);\n                }\n            }).join('');\n        } else {\n            if (!options.namespace && this.options.namespace) {\n                options.namespace = this.options.namespace;\n            }\n            options.as = attribute;\n\n            builder = new FormBuilder(this.model.get(attribute), options);\n            return content(builder);\n        }\n\n    }\n    \n};\n\nexport default FormBuilder;\n","// distanceOfTimeInWords(fromTime)\n// distanceOfTimeInWords(fromTime, options)\n// distanceOfTimeInWords(fromTime, toTime)\n// distanceOfTimeInWords(fromTime, toTime, options)\n// ================================================\n//\n// Reports the approximate distance in time between two Date objects. If only\n// fromTime is given, toTime defaults to now\n//\n// Pass +includeSeconds: true+ if you want more detailed approximations\n// when distance < 1 min, 29 secs.\n//\n// Distances are reported based on the following table:\n//\n//   0 secs <-> 1 min, 29 secs                                                  # => a minute\n//   1 min, 30 secs <-> 59 mins, 29 secs                                        # => [2..59] minutes\n//   59 mins, 30 secs <-> 1 hr, 29 mins, 59 secs                                # => an hour\n//   1 hr, 30 mins, 0 secs <-> 23 hrs, 29 mins, 59 secs                         # => [2..23] hours\n//   23 hrs, 30 mins, 0 secs <-> 1 day, 11 hrs, 59 mins, 59 secs                # => a day\n//   1 day, 12 hrs, 0 mins, 0 secs <-> 29 days, 11 hrs, 59 mins, 59 secs        # => [2..29] days\n//   29 days, 12 hrs, 0 mins, 0 secs <-> 44 days, 23 hrs, 59 mins, 59 secs       # => a month\n//   45 days, 0 hrs, 0 mins, 0 secs <-> 1 yr minus 1 sec                        # => [2..12] months\n//   1 yr <-> 1 yr, 3 months                                                    # => a year\n//   1 yr, 3 months <-> 1 yr, 9 months                                          # => over a year\n//   1 yr, 9 months <-> 2 yr minus 1 sec                                        # => almost 2 years\n//   2 yrs <-> max time or date                                                 # => (same rules as 1 yr)\n//\n// With <tt>includeSeconds: true</tt> and the difference < 1 minute 29 seconds:\n//   0-1   secs      # => a second\n//   2-9   secs      # => [1..9] seconds\n//   10-54 secs      # => [10,20...50] seconds\n//   55-89 secs      # => a minute\n//\n//   fromTime = new Date()\n//   distanceOfTimeInWords(fromTime, fromTime + 50.minutes)                                # => about 1 hour\n//   distanceOfTimeInWords(fromTime, 50.minutes.from_now)                                   # => about 1 hour\n//   distanceOfTimeInWords(fromTime, fromTime + 15.seconds)                                # => less than a minute\n//   distanceOfTimeInWords(fromTime, fromTime + 15.seconds, include_seconds: true)         # => less than 20 seconds\n//   distanceOfTimeInWords(fromTime, 3.years.from_now)                                      # => about 3 years\n//   distanceOfTimeInWords(fromTime, fromTime + 60.hours)                                  # => 3 days\n//   distanceOfTimeInWords(fromTime, fromTime + 45.seconds, include_seconds: true)         # => less than a minute\n//   distanceOfTimeInWords(fromTime, fromTime - 45.seconds, include_seconds: true)         # => less than a minute\n//   distanceOfTimeInWords(fromTime, 76.seconds.from_now)                                   # => 1 minute\n//   distanceOfTimeInWords(fromTime, fromTime + 1.year + 3.days)                           # => about 1 year\n//   distanceOfTimeInWords(fromTime, fromTime + 3.years + 6.months)                        # => over 3 years\n//   distanceOfTimeInWords(fromTime, fromTime + 4.years + 9.days + 30.minutes + 5.seconds) # => about 4 years\n//\n//   toTime = Time.now + 6.years + 19.days\n//   distanceOfTimeInWords(fromTime, toTime, include_seconds: true)                        # => about 6 years\n//   distanceOfTimeInWords(toTime, fromTime, include_seconds: true)                        # => about 6 years\n//   distanceOfTimeInWords(Time.now, Time.now)                                               # => less than a minute\nexport const distanceOfTimeInWords = function (fromTime, toTime, options) {\n    let tmp;\n    \n    if (!(toTime instanceof Date)) {\n        options = toTime;\n        toTime = new Date();\n    }\n    \n    options = _.extend({}, options);\n    \n    if ( fromTime > toTime ) {\n        tmp = fromTime;\n        fromTime = toTime;\n        toTime = tmp;\n    }\n    \n    let distance_in_seconds = Math.round((toTime.getTime() - fromTime.getTime()) / 1000);\n    let distance_in_minutes = Math.round(distance_in_seconds / 60);\n\n    if (distance_in_seconds <= 60) {\n        if ( options.includeSeconds ) {\n            if (distance_in_seconds < 2) {\n                return \"a second\";\n            } else if (distance_in_seconds < 10) {\n                return distance_in_seconds + \" seconds\";\n            } else if (distance_in_seconds < 55) {\n                return (Math.round(distance_in_seconds/10)*10) + \" seconds\";\n            } else {\n                return \"a minute\";\n            }\n        } else {\n            return \"a minute\";\n        }\n    } else if (distance_in_seconds < 90) {\n        return \"a minute\";\n    } else if (distance_in_seconds < (59*60) + 30) {\n        return distance_in_minutes + \" minutes\";\n    } else if (distance_in_seconds < (1*3600) + (30*60)) {\n        return \"an hour\";\n    } else if (distance_in_seconds < (23*3600) + (30*60)) { // Less than 23.5 Hours\n        return Math.round(distance_in_seconds / 3600) + \" hours\"\n    } else if (distance_in_seconds < (36*3600)) { // Less than 36 Hours\n        return \"a day\";\n    } else if (distance_in_seconds < (29*86400) + (12*3600)) { // Less than 29.5 Days\n        return Math.round(distance_in_seconds / 86400) + \" days\"\n    } else if (distance_in_seconds < (45*86400)) { // Less than 45 Days\n        return \"a month\";\n    } else if (distance_in_seconds < (365*86400)) { // Less than 365 Days\n        return Math.round(distance_in_seconds / (30*86400)) + \" months\"\n    } else {\n        // 1 year = 525949 min\n        // 1 leap year = 527040 min\n        // for out calculations 400 year = 97 leap years + 303 years\n        // 1 year ~= (525949 * 303 + 527040 * 97) / 400 = 526213.5675 min\n        let years = Math.round((distance_in_minutes / 526213.5675)*100)/100;\n        let partial_years = Math.round(years % 1 * 100) / 100;\n        if (years < 1 || partial_years < 0.33) {\n            years = Math.round(years);\n            if (years == 1) { \n                return \"a year\";\n            } else {\n                return years + \" years\";\n            }\n        } else if (partial_years < 0.66) {\n            years = Math.floor(years);\n            if (years == 1) { \n                return \"over a year\";\n            } else {\n                return \"over \" + years + \" years\";\n            }\n        } else {\n            years = Math.floor(years);\n            return \"almost \" + (years+1) + \" years\";\n        }\n    }\n};\n\nexport const timeAgoInWords = distanceOfTimeInWords;\n","// The Viking gloval namespace for tracking created models, collections, etc...\nexport let templates = {};\n\nexport default templates;","import Helpers from '../helpers';\nimport templates from '../templates';\n\nexport const render = function (templatePath, locals) {\n    let template = templates[templatePath];\n\n    if (!locals) {\n        locals = {};\n    }\n\n    if (template) {\n        return template(_.extend(locals, Helpers));\n    }\n\n    throw new Error('Template does not exist: ' + templatePath);\n};\n\nexport default render;","import { global } from '../../../global';\n\n// urlFor(modelOrUrl, options)\n// ===========================\n//\n// Returns the URL for the model. Note that by default +:onlyPath+ is +true+ so\n// you'll get the relative \"/controller/action\" instead of the fully qualified\n// URL like \"http://example.com/controller/action\".\n//\n// Passing the model will trigger the named route for that record. The lookup\n// will happen on the name of the class. So passing a Workshop object will attempt\n// to use the +workshopPath+ route. If you have a nested route, such as\n// +adminWorkshopPath+ you'll have to call that explicitly (it's impossible\n// for +urlFor+ to guess that route).\n//\n// If a string is passed instead of a model, the string is simply returned.\n//\n// ==== Options\n//   - anchor: Specifies the anchor name to be appended to the path.\n//   - onlyPath: If +true+, returns the relative URL (omitting the protocol,\n//               host name, and port) (+false+ by default).\n//   - trailingSlash: If true, adds a trailing slash, as in \"/archive/2005/\".\n//                     Note that this is currently not recommended since it\n//                     breaks caching.\n//   - host: Overrides the default (current) host if provided.\n//   - port: Optionally specify the port to connect to\n//   - protocol: Overrides the default (current) protocol if provided.\n//   - scriptName: Specifies application path relative to domain root. If\n//                 provided, prepends application path\n//   - user: Inline HTTP authentication (only plucked out if +:password+ is also present).\n//   - password: Inline HTTP authentication (only plucked out if +:user+ is also present).\n//\n// ==== Examples\n//   urlFor(Workshop)\n//   // uses +workshopsUrl()+\n//   # => http://www.example.com/workshops\n//\n//   urlFor(new Workshop())\n//   // relies on Workshop answering isNew() (and in this case returning true)\n//   # => http://www.example.com/workshops\n//\n//   urlFor(workshop)\n//   // uses +workshopUrl(model)+\n//   // which calls workshop.toParam() which by default returns the id\n//   // => http://www.example.com/workshops/5\n//\n//   // toParam() can be re-defined in a model to provide different URL names:\n//   // => http://www.example.com/workshops/1-workshop-name\n//\n//   urlFor(workshop, {anchor: 'location'})\n//   // => http://www.example.com/workshops/5#location\n//\n//   urlFor(workshop, {onlyPath: true})\n//   // => /workshops/5\n//\n//   urlFor(workshop, {trailingSlash: true})\n//   // => http://www.example.com/workshops/5/\n//\n//   urlFor(workshop, {host: 'myhost'})\n//   // => http://myhost.com/workshops/5\n//\n//   urlFor(workshop, {port: 9292})\n//   // => http://www.example.com:9292/workshops/5\n//\n//   urlFor(workshop, {protocol: 'https'})\n//   // => https://www.example.com/workshops/5\n//\n//   urlFor(workshop, {scriptName: '/location'})\n//   // => http://example.com/location/workshops/5\n//\n//   urlFor(workshop, {user: 'username', password: 'password'})\n//   // => http://username:password@example.com/workshops/5\n//\n//   urlFor(\"http://www.example.com\")\n//   // => http://www.example.com\n//\n// TODO: support polymorhic_paths... ie [blog, post] => /blogs/1/posts/3\n//       polymorphic_url([blog, post]) # => \"http://example.com/blogs/1/posts/1\"\n//       polymorphic_url([:admin, blog, post]) # => \"http://example.com/admin/blogs/1/posts/1\"\n//       polymorphic_url([user, :blog, post]) # => \"http://example.com/users/1/blog/posts/1\"\n//       polymorphic_url(Comment) # => \"http://example.com/comments\"\n//\nexport const urlFor = function (modelOrUrl, options) {\n    if (typeof modelOrUrl === 'string') {\n        return modelOrUrl;\n    }\n    \n    options = _.extend({\n        onlyPath: false,\n        trailingSlash: false,\n        host: window.location.hostname,\n        port: window.location.port,\n        scriptName: '',\n        protocol: window.location.protocol.replace(':', '')\n    }, options);\n    \n    let route;\n    let klass = modelOrUrl.baseModel.modelName.model();\n    if (modelOrUrl instanceof klass) {\n        if (modelOrUrl.isNew()) {\n            route = (klass.baseModel.modelName.plural + 'Path').constantize(global);\n            route = route();\n        } else {\n            route = (klass.baseModel.modelName.singular + 'Path').constantize(global);\n            route = route(modelOrUrl);\n        }\n    } else {\n        route = (modelOrUrl.baseModel.modelName.plural + 'Path').constantize(global);\n        route = route();\n    }\n    \n    if (!options.onlyPath) {\n        route = options.protocol + '://' + options.host + (options.port ? ':' : '') + options.port + options.scriptName + route;\n        \n        if (options.user && options.password) {\n            route = route.replace('://', '://' + options.user + ':' + options.password + '@');\n        }\n    }\n    \n    if (options.trailingSlash) {\n        route += '/';\n    }\n    \n    if (options.anchor) {\n        route += '#' + options.anchor;\n    }\n    \n    return route;\n};","import { urlFor } from './url_for';\nimport { contentTag } from '../form_tag_helpers';\n\n// linkTo(modelOrUrl, name, options)\n// =================================\n//\n// Creates a link tag to the +modelOrUrl+. If +modelOrUrl+ is a model a href is\n// generated from the routes. If a String is passed it is used as the href. See\n// the documentation for +urlFor+ for how +modelOrUrl+ is translated into a url.\n//\n// ==== Signatures\n//\n//   linkTo(content, url)\n//   \n//   linkTo(content, url, options)\n//\n//   linkTo(url, contentFunc)\n//\n//   linkTo(url, options, contentFunc)\n//\n// ==== Options\n//   - data: This option can be used to add custom data attributes.\n// TODO: method not supported yet\n//   - method: an HTTP verb. This modifier will dynamically create an HTML form\n//             and immediately submit the form for processing using the HTTP verb\n//             specified. Useful for having links perform a POST operation\n//             in dangerous actions like deleting a record (which search bots can\n//             follow while spidering your site). Supported verbs are +post+,\n//             +:delete+, +:patch+, and +:put+.\n//\n// ==== Examples\n//\n//   linkTo(\"Profile\", profilePath(profile))\n//   // => <a href=\"/profiles/1\">Profile</a>\n//\n// or the even pithier\n//\n//   linkTo(\"Profile\", profile)\n//   // => <a href=\"/profiles/1\">Profile</a>\n//\n// Similarly,\n//\n//   linkTo(\"Profiles\", profiles_path())\n//   // => <a href=\"/profiles\">Profiles</a>\n//\n// You can use a function as well if your link target is hard to fit into the\n// name parameter. EJS example:\n//\n//   <%= linkTo(profile, function () { %>\n//     <strong><%= profile.name %></strong> -- <span>Check it out!</span> \n//   <% }) %>\n//   // => <a href=\"/profiles/1\">\n//          <strong>David</strong> -- <span>Check it out!</span>\n//         </a>\n//\n// Classes and ids for CSS are easy to produce:\n//\n//   linkTo(\"Articles\", articles_path(), {id: 'news', class: 'article'})\n//   // => <a href=\"/articles\" class=\"article\" id=\"news\">Articles</a>\n//\n// +linkTo+ can also produce links with anchors or query strings:\n//\n//   linkTo(\"Comment wall\", profilePath(profile, {anchor: \"wall\"}))\n//   // => <a href=\"/profiles/1#wall\">Comment wall</a>\n//\n//   linkTo(\"Nonsense search\", searches_path({foo: \"bar\", baz: \"quux\"}))\n//   // => <a href=\"/searches?foo=bar&amp;baz=quux\">Nonsense search</a>\n//\n// TODO: method not supported yet\n// The only option specific to +linkTo+ (+:method+) is used as follows:\n//\n//   linkTo(\"Destroy\", \"http://www.example.com\", {method: \"delete\"})\n//   // => <a href='http://www.example.com' rel=\"nofollow\" data-method=\"delete\">Destroy</a>\n//\n// You can also use custom data attributes using the +:data+ option:\n//\n//   linkTo(\"Visit Other Site\", \"http://www.rubyonrails.org/\", { data: { confirm: \"Are you sure?\" }})\n//   // => <a href=\"http://www.rubyonrails.org/\" data-confirm=\"Are you sure?\">Visit Other Site</a>\nexport const linkTo = function (content, modelOrUrl, options) {\n    let tmp;\n    \n    if (typeof modelOrUrl === 'function') {\n        tmp = content;\n        content = modelOrUrl;\n        modelOrUrl = tmp;\n    } else if (typeof options === 'function') {\n        tmp = options;\n        options = modelOrUrl;\n        modelOrUrl = content;\n        content = tmp;\n    }\n    \n    options = _.extend({\n        href: urlFor(modelOrUrl)\n    }, options);\n\n    return contentTag('a', content, options);\n};\n\nexport default linkTo;\n","import { contentTag } from '../form_tag_helpers';\n\n// mailTo(email, name, options)\n// mailTo(email, contentFunc)\n// mailTo(email, options, contentFunc)\n// =====================================================================\n//\n// Creates a mailto link tag to the specified +email+, which is\n// also used as the name of the link unless +name+ is specified. Additional\n// HTML attributes for the link can be passed in +options+.\n//\n// +mailTo+ has several methods for customizing the email itself by\n// passing special keys to +options+.\n//\n// Options\n// -------\n//      - subject:  Preset the subject line of the email.\n//      - body:     Preset the body of the email.\n//      - cc:       Carbon Copy additional recipients on the email.\n//      - bcc:      Blind Carbon Copy additional recipients on the email.\n//\n// Examples\n// --------\n//   mailTo('me@domain.com')\n//   // => <a href=\"mailto:me@domain.com\">me@domain.com</a>\n//\n//   mailTo('me@domain.com', 'My email')\n//   // => <a href=\"mailto:me@domain.com\">My email</a>\n//\n//   mailTo('me@domain.com', 'My email', {\n//     cc: 'ccaddress@domain.com',\n//     subject: 'This is an example email'\n//   })\n//   // => <a href=\"mailto:me@domain.com?cc=ccaddress@domain.com&subject=This%20is%20an%20example%20email\">My email</a>\n//\n// You can use a function as well if your link target is hard to fit into the\n// name parameter.\n// \n//   mailTo('me@domain.com', function () {\n//     return \"<strong>Email me:</strong> <span>me@domain.com</span>\";\n//   });\n//   // => <a href=\"mailto:me@domain.com\"><strong>Email me:</strong> <span>me@domain.com</span></a>\n//\n//   mailTo('me@domain.com', {key: 'value'}, function () {\n//     return \"Email me\";\n//   });\n//   // => <a href=\"mailto:me@domain.com\" key=\"value\">Email me</a>\n//\n//   mailTo('me@domain.com', function(){ return \"Email me\"; }, {key: 'value'});\n//   // => <a href=\"mailto:me@domain.com\" key=\"value\">Email me</a>\nexport const mailTo = function (email, name, options) {\n    let tmp;\n    \n    // handle (email, name, options), (email, contentFunc), and \n    // (email, options, contentFunc) formats\n    if (typeof options === 'function') {\n        tmp = options;\n        options = name;\n        name = tmp;\n    } else if (typeof name === 'object') {\n        options = name;\n        name = undefined;\n    }\n    if (name === undefined) {\n        name = _.escape(email);\n    }\n    options || (options = {});\n    \n    let extras = _.map(_.pick(options, 'cc', 'bcc', 'body', 'subject'), function(value, key) {\n        return key + '=' + encodeURI(value);\n    }).join('&');\n    if (extras.length > 0) { extras = '?' + extras; }\n    options = _.omit(options, 'cc', 'bcc', 'body', 'subject');\n    \n    options.href = \"mailto:\" + email + extras;\n\n    return contentTag('a', name, options, false);\n};\n\nexport default mailTo;\n","//= require viking/view/helpers/form_tag_helpers\n//= require viking/view/helpers/builders\n//= require viking/view/helpers/date_helpers\n//= require viking/view/helpers/form_helpers\n//= require viking/view/helpers/url_helpers\n//= require viking/view/helpers/asset_helpers\n//= require viking/view/helpers/render_helper\n\nimport { imageTag } from './helpers/asset_helpers/image_tag';\n\nimport {\n    CheckBoxGroupBuilder, FormBuilder\n} from './helpers/builders';\n\nimport {\n    timeAgoInWords, distanceOfTimeInWords,\n    localTime, localDate, localTimeAgo, localRelativeTime, formatTime\n} from './helpers/date_helpers';\n\nimport {\n    checkBoxGroup, checkBox, collectionSelect, formFor, hiddenField, label,\n    numberField, passwordField, radioButton, select, textArea, textField\n} from './helpers/form_helpers';\n\nimport {\n    tagOption, dataTagOption, tagOptions, sanitizeToId,\n    tagNameForModelAttribute, addErrorClassToOptions,\n    methodOrAttribute\n} from './helpers/utils';\n\nimport {\n    buttonTag,  checkBoxTag, contentTag, formTag, hiddenFieldTag, labelTag,\n    numberFieldTag, optionsForSelectTag, optionsFromCollectionForSelectTag,\n    passwordFieldTag, radioButtonTag, selectTag, submitTag, tag, textAreaTag,\n    textFieldTag, timeTag\n} from './helpers/form_tag_helpers';\n\nimport render from './helpers/render';\n\nimport { linkTo, mailTo, urlFor } from './helpers/url_helpers';\n\nexport const Helpers = {\n    // Asset Helpers\n    imageTag: imageTag,\n\n    // Builders\n    CheckBoxGroupBuilder: CheckBoxGroupBuilder,\n    FormBuilder: FormBuilder,\n\n    // Date Helpers\n    timeAgoInWords: timeAgoInWords,\n    distanceOfTimeInWords: distanceOfTimeInWords,\n    // localTime: localTime,\n    // localDate: localDate,\n    // localTimeAgo: localTimeAgo,\n    // localRelativeTime: localRelativeTime,\n    // formatTime: formatTime,\n    \n    // Form Helpers\n    checkBoxGroup: checkBoxGroup,\n    checkBox: checkBox,\n    collectionSelect: collectionSelect,\n    formFor: formFor,\n    hiddenField: hiddenField,\n    label: label,\n    numberField: numberField,\n    passwordField: passwordField,\n    radioButton: radioButton,\n    select: select,\n    textArea: textArea,\n    textField: textField,\n\n    // Utils\n    tagOption: tagOption,\n    dataTagOption: dataTagOption,\n    tagOptions: tagOptions,\n    sanitizeToId: sanitizeToId,\n    tagNameForModelAttribute: tagNameForModelAttribute,\n    addErrorClassToOptions: addErrorClassToOptions,\n    methodOrAttribute: methodOrAttribute,\n\n    // Form Tag Helpers\n    buttonTag: buttonTag,\n    checkBoxTag: checkBoxTag,\n    contentTag: contentTag,\n    formTag: formTag,\n    hiddenFieldTag: hiddenFieldTag,\n    labelTag: labelTag,\n    numberFieldTag: numberFieldTag,\n    optionsForSelectTag: optionsForSelectTag,\n    optionsFromCollectionForSelectTag: optionsFromCollectionForSelectTag,\n    passwordFieldTag: passwordFieldTag,\n    radioButtonTag: radioButtonTag,\n    selectTag: selectTag,\n    submitTag: submitTag,\n    tag: tag,\n    textAreaTag: textAreaTag,\n    textFieldTag: textFieldTag,\n    timeTag: timeTag,\n\n    // URL Helpers\n    linkTo: linkTo,\n    mailTo: mailTo,\n    urlFor: urlFor,\n\n    // Render\n    render: render\n}\n\nexport default Helpers;\nexport * from './helpers/utils';\nexport * from './helpers/form_tag_helpers';\n","import Helpers from './view/helpers';\nimport templates from './view/templates';\nimport {\n    tagOption, dataTagOption, tagOptions, sanitizeToId, tagNameForModelAttribute,\n    addErrorClassToOptions, methodOrAttribute\n} from './view/helpers/utils';\nimport { urlFor } from './view/helpers/url_helpers/url_for';\n\n// TODO: Remove utils from Viking.View, not sure why they are added to it.\n// Viking.View\n// -----------\n//\n// Viking.View is a framework fro handling view template lookup and rendering.\n// It provides view helpers that assisst when building HTML forms and more.\nexport const View = Backbone.View.extend({\n\n    template: undefined,\n\n    renderTemplate: function(locals) {\n        return Helpers.render(this.template, locals);\n    },\n\n    //Copied constructor from Backbone View\n    constructor: function (options) {\n        this.cid = _.uniqueId('view');\n        options || (options = {});\n        _.extend(this, _.pick(options, ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events']));\n        this._ensureElement();\n        \n        // Add an array for storing subView attached to this view so we can remove then\n        this.subViews = [];\n        \n        this.initialize.apply(this, arguments);\n        this.delegateEvents();\n    },\n    \n    // A helper method that constructs a view and adds it to the subView array\n    subView: function (SubView, options) {\n        let view = new SubView(options);\n        this.subViews.push(view);\n        this.listenTo(view, 'remove', this.removeSubView);\n        return view;\n    },\n    \n    // Removes the subview from the array and stop listening to it, and calls\n    // #remove on the subview.\n    removeSubView: function (view) {\n        this.subViews = _.without(this.subViews, view);\n        this.stopListening(view);\n        view.remove();\n    },\n    \n    // Remove all subviews when remove this view. We don't call stopListening\n    // here because this view is being removed anyways so those will get cleaned\n    // up by Backbone.\n    remove: function () {\n        while (this.subViews.length > 0){\n            this.subViews.pop().remove();\n        }\n        \n        // Emit a remove event for when a view is removed\n        // TODO: Maybe backport this to Backbone?\n        this.trigger('remove', this);\n\n        Backbone.View.prototype.remove.apply(this, arguments);\n    },\n    \n    // Listens to attribute(s) of the model of the view, on change\n    // renders the new value to el. Optionally, pass render function to render \n    // something different, model is passed as an arg\n    // TODO: document me\n    bindEl: function (attributes, selector, render) {\n        let view = this;\n        render || (render = function (model) { return model.get(attributes); } );\n        if (!_.isArray(attributes)) { attributes = [attributes]; }\n        \n        //TODO: might want to Debounce because of some inputs being very rapid\n        // but maybe that should be left up to the user changes (ie textareas like description)\n        _.each(attributes, function (attribute) {\n            view.listenTo(view.model, 'change:' + attribute, function (model) {\n                view.$(selector).html( render(model) );\n            });\n        });\n    }\n    \n    //TODO: Default render can just render template\n}, {\n\n    // `Viking.View.templates` is used for storing templates. \n    // `Viking.View.Helpers.render` looks up templates in this\n    // variable\n    templates: templates,\n\n    // registerTemplate: function (path, template) {\n    //     templates[path] = template;\n    // },\n\n    // Override the original extend function to support merging events\n    extend: function(protoProps, staticProps) {\n        if (protoProps && protoProps.events) {\n            _.defaults(protoProps.events, this.prototype.events);\n        }\n\n        return Backbone.View.extend.call(this, protoProps, staticProps);\n    },\n\n    urlFor: urlFor,\n    tagOption: tagOption,\n    dataTagOption: dataTagOption,\n    tagOptions: tagOptions,\n    sanitizeToId: sanitizeToId,\n    tagNameForModelAttribute: tagNameForModelAttribute,\n    addErrorClassToOptions: addErrorClassToOptions,\n    methodOrAttribute: methodOrAttribute\n\n});\n\nView.Helpers = Helpers;\n\nexport default View;","const Cursor = Backbone.Model.extend({\n    defaults: {\n        \"page\": 1,\n        \"per_page\": 25\n    },\n    \n    reset: function(options) {\n        this.set({\n            page: 1\n        }, {silent: true});\n        \n        if(!(options && options.silent) && this.requiresRefresh()) {\n            this.trigger('reset', this, options);\n        }\n    },\n    \n    incrementPage: function(options) {\n        this.set('page', this.get('page') + 1, options);\n    },\n    \n    decrementPage: function(options) {\n        this.set('page', this.get('page') - 1, options);\n    },\n    \n    goToPage: function(pageNumber, options) {\n        this.set('page', pageNumber, options);\n    },\n    \n    limit: function() {\n        return this.get('per_page');\n    },\n    \n    offset: function () {\n        return this.get('per_page') * (this.get('page') - 1);\n    },\n    \n    totalPages: function () {\n        return Math.ceil(this.get('total_count') / this.limit());\n    },\n    \n    requiresRefresh: function() {\n        let changedAttributes = this.changedAttributes();\n        if(changedAttributes) {\n            let triggers = ['page', 'per_page'];\n            return (_.intersection(_.keys(changedAttributes), triggers).length > 0);\n        }\n        \n        return false;\n    }\n    \n});\n\nexport default Cursor;\n","export const Controller = Backbone.Model.extend({\n    \n    // Below is the same code from the Backbone.Model function\n    // except where there are comments\n    constructor: function (attributes, options) {\n        let attrs = attributes || {};\n        options || (options = {});\n        this.cid = _.uniqueId('c');\n        this.attributes = {};\n        if (options.collection) this.collection = options.collection;\n        if (options.parse) attrs = this.parse(attrs, options) || {};\n        attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n        this.set(attrs, options);\n        this.changed = {};\n        this.initialize.apply(this, arguments);\n        \n        // Add a helper reference to get the model name from an model instance.\n        this.controllerName = this.constructor.controllerName;\n    }\n    \n}, {\n    \n    // Overide the default extend method to support passing in the controlelr name\n    //\n    // The name is helpful for determining the current controller and using it\n    // as a key\n    //\n    // `name` is optional, and must be a string\n    extend: function(controllerName, protoProps, staticProps) {\n        if(typeof controllerName !== 'string') {\n            staticProps = protoProps;\n            protoProps = controllerName;\n        }\n        protoProps || (protoProps = {});\n        \n        let child = Backbone.Model.extend.call(this, protoProps, staticProps);\n\n        if(typeof controllerName === 'string') { child.controllerName = controllerName; }\n        \n        _.each(protoProps, function(value, key) {\n            if (typeof value === 'function') { child.prototype[key].controller = child; }\n        });\n        \n        return child;\n    }\n\n});\n\nexport default Controller;\n","import Controller from './controller';\n\n// export let currentController;\n\nexport const Router = Backbone.Router.extend({\n\n    currentController: undefined,\n\n    route: function (route, name, callback) {\n        let router, controller, action;\n\n        if (!_.isRegExp(route)) {\n            if (/^r\\/.*\\/$/.test(route)) {\n                route = new RegExp(route.slice(2, -1));\n            } else {\n                route = this._routeToRegExp(route);\n            }\n        }\n\n        if (_.isFunction(name)) {\n            callback = name;\n            name = '';\n        } else if (_.isString(name) && name.match(/^(\\w+)#(\\w+)$/)) {\n            controller = /^(\\w+)#(\\w+)$/.exec(name);\n            action = controller[2];\n            controller = controller[1];\n            callback = {controller: controller, action: action};\n        } else if (_.isObject(name)) {\n            // TODO: maybe this should be Controller::action since it's not\n            // an instance method\n            controller = /^(\\w+)#(\\w+)$/.exec(name.to);\n            action = controller[2];\n            controller = controller[1];\n            name = name.name;\n\n            callback = {controller: controller, action: action};\n        }\n\n        if (!callback) { callback = this[name]; }\n\n        router = this;\n        Backbone.history.route(route, function (fragment) {\n            let controllerClass;\n            let args = router._extractParameters(route, fragment);\n            let previousController = router.currentController;\n            router.currentController = undefined;\n\n            if (!callback) { return; }\n\n            if (_.isFunction(callback)) {\n                callback.apply(router, args);\n            } else if (window[callback.controller]) {\n                controllerClass = window[callback.controller];\n\n                if (controllerClass.__super__ === Controller.prototype) {\n                    if ( !(previousController instanceof controllerClass) ) {\n                        router.currentController = new controllerClass();\n                    } else {\n                        router.currentController = previousController;\n                    }\n                } else {\n                    router.currentController = controllerClass;\n                }\n    \n                if (router.currentController && router.currentController[callback.action]) {\n                    router.currentController[callback.action].apply(router.currentController, args);\n                }\n            }\n\n            router.trigger.apply(router, ['route:' + name].concat(args));\n            router.trigger('route', name, args);\n            Backbone.history.trigger('route', router, name, args);\n        });\n        return this;\n    },\n\n    // Calls Backbone.history.start, with the default options {pushState: true}\n    start: function (options) {\n        options = _.extend({pushState: true}, options);\n        \n        return Backbone.history.start(options);\n    },\n\n    stop: function () {\n        Backbone.history.stop();\n    },\n\n    navigate: function (fragment, args) {\n        let root_url = window.location.protocol + '//' + window.location.host;\n        if (fragment.indexOf(root_url) === 0) { fragment = fragment.replace(root_url, ''); }\n\n        Backbone.Router.prototype.navigate.call(this, fragment, args);\n    }\n\n});\n\nexport default Router;\n","import Cursor from './cursor';\nimport Collection from './collection';\n\nexport const PaginatedCollection = Collection.extend({\n\n    constructor: function(models, options) {\n        Collection.apply(this, arguments);\n        this.cursor = ((options && options.cursor) || new Cursor());\n        this.listenTo(this.cursor, 'change', function() {\n            if(this.cursor.requiresRefresh()) {\n                this.cursorChanged.apply(this, arguments);\n            }\n        });\n    },\n    \n    predicateChanged: function(predicate, options) {\n        this.cursor.reset({silent: true});\n        this.cursorChanged();\n    },\n    \n    cursorChanged: function(cursor, options) {\n        this.fetch();\n    },\n    \n    parse: function(attrs, xhr) {\n        this.cursor.set({\n            total_count: parseInt(xhr.xhr.getResponseHeader('Total-Count'))\n        });\n        \n        return attrs;\n    },\n    \n    sync: function(method, model, options) {\n        if(method === 'read') {\n            options.data || (options.data = {});\n            options.data.limit = model.cursor.limit();\n            options.data.offset = model.cursor.offset();\n            options.headers || (options.headers = {});\n            options.headers['Total-Count'] = 'true';\n        }\n        return Collection.prototype.sync.call(this, method, model, options);\n    }\n    \n});\n\nexport default PaginatedCollection;\n","// Viking.js <%= version %> (sha:<%= git_info[:head][:sha] %>)\n// \n// (c) 2012-<%= Time.now.year %> Jonathan Bracy, 42Floors Inc.\n// Viking.js may be freely distributed under the MIT license.\n// http://vikingjs.com\n\nimport './viking/support';\nimport sync from './viking/sync';\nimport View from './viking/view';\nimport Model from './viking/model';\nimport Cursor from './viking/cursor';\nimport Router from './viking/router';\nimport Predicate from './viking/predicate';\nimport Controller from './viking/controller';\nimport Collection from './viking/collection';\nimport PaginatedCollection from './viking/paginated_collection';\n\nconst Viking = {\n    sync: sync,\n    Model: Model,\n    Cursor: Cursor,\n    Collection: Collection,\n    Predicate: Predicate,\n    PaginatedCollection: PaginatedCollection,\n    Controller: Controller,\n    Router: Router,\n    View: View\n};\n\nexport default Viking;\n"],"names":["sync","babelHelpers.typeof","global","defaults","set","urlRoot","_sync","label","select","_checkBox","_collectionSelect","_hiddenField","_passwordField","_radioButton","_select","_textArea","_textField","_checkBoxGroup","Viking"],"mappings":"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"}